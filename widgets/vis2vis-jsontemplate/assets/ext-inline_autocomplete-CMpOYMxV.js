import{a as Q}from"./_commonjsHelpers-DsqdWQfm.js";function q(V,K){for(var f=0;f<K.length;f++){const C=K[f];if(typeof C!="string"&&!Array.isArray(C)){for(const F in C)if(F!=="default"&&!(F in V)){const E=Object.getOwnPropertyDescriptor(C,F);E&&Object.defineProperty(V,F,E.get?E:{enumerable:!0,get:()=>C[F]})}}}return Object.freeze(Object.defineProperty(V,Symbol.toStringTag,{value:"Module"}))}var Z={exports:{}};(function(V,K){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(f,C,F){var E=f("./lib/dom"),T=f("./lib/oop"),y=f("./lib/event_emitter").EventEmitter,v=f("./lib/lang"),g=f("./range").Range,b=f("./range_list").RangeList,$=f("./keyboard/hash_handler").HashHandler,x=f("./tokenizer").Tokenizer,L=f("./clipboard"),N={CURRENT_WORD:function(e){return e.session.getTextRange(e.session.getWordRange())},SELECTION:function(e,i,n){var t=e.session.getTextRange();return n?t.replace(/\n\r?([ \t]*\S)/g,`
`+n+"$1"):t},CURRENT_LINE:function(e){return e.session.getLine(e.getCursorPosition().row)},PREV_LINE:function(e){return e.session.getLine(e.getCursorPosition().row-1)},LINE_INDEX:function(e){return e.getCursorPosition().row},LINE_NUMBER:function(e){return e.getCursorPosition().row+1},SOFT_TABS:function(e){return e.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(e){return e.session.getTabSize()},CLIPBOARD:function(e){return L.getText&&L.getText()},FILENAME:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0]},FILENAME_BASE:function(e){return/[^/\\]*$/.exec(this.FILEPATH(e))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(e){return this.FILEPATH(e).replace(/[^/\\]*$/,"")},FILEPATH:function(e){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(e){var i=e.session.$mode||{};return i.blockComment&&i.blockComment.start||""},BLOCK_COMMENT_END:function(e){var i=e.session.$mode||{};return i.blockComment&&i.blockComment.end||""},LINE_COMMENT:function(e){var i=e.session.$mode||{};return i.lineCommentStart||""},CURRENT_YEAR:_.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:_.bind(null,{year:"2-digit"}),CURRENT_MONTH:_.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:_.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:_.bind(null,{month:"short"}),CURRENT_DATE:_.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:_.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:_.bind(null,{weekday:"short"}),CURRENT_HOUR:_.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:_.bind(null,{minute:"2-digit"}),CURRENT_SECOND:_.bind(null,{second:"2-digit"})};N.SELECTED_TEXT=N.SELECTION;function _(e){var i=new Date().toLocaleString("en-us",e);return i.length==1?"0"+i:i}var k=function(){function e(){this.snippetMap={},this.snippetNameMap={},this.variables=N}return e.prototype.getTokenizer=function(){return e.$tokenizer||this.createTokenizer()},e.prototype.createTokenizer=function(){function i(o){return o=o.substr(1),/^\d+$/.test(o)?[{tabstopId:parseInt(o,10)}]:[{text:o}]}function n(o){return"(?:[^\\\\"+o+"]|\\\\.)"}var t={regex:"/("+n("/")+"+)/",onMatch:function(o,l,c){var s=c[0];return s.fmtString=!0,s.guard=o.slice(1,-1),s.flag="",""},next:"formatString"};return e.$tokenizer=new x({start:[{regex:/\\./,onMatch:function(o,l,c){var s=o[1];return(s=="}"&&c.length||"`$\\".indexOf(s)!=-1)&&(o=s),[o]}},{regex:/}/,onMatch:function(o,l,c){return[c.length?c.shift():o]}},{regex:/\$(?:\d+|\w+)/,onMatch:i},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(o,l,c){var s=i(o.substr(1));return c.unshift(s[0]),s},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+n("\\|")+"*\\|",onMatch:function(o,l,c){var s=o.slice(1,-1).replace(/\\[,|\\]|,/g,function(p){return p.length==2?p[1]:"\0"}).split("\0").map(function(p){return{value:p}});return c[0].choices=s,[s[0]]},next:"start"},t,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(o,l,c){return c.length&&c[0].expectElse?(c[0].expectElse=!1,c[0].ifEnd={elseEnd:c[0]},[c[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(o,l,c){var s=o[1];return s=="}"&&c.length||"`$\\".indexOf(s)!=-1?o=s:s=="n"?o=`
`:s=="t"?o="	":"ulULE".indexOf(s)!=-1&&(o={changeCase:s,local:s>"a"}),[o]}},{regex:"/\\w*}",onMatch:function(o,l,c){var s=c.shift();return s&&(s.flag=o.slice(1,-1)),this.next=s&&s.tabstopId?"start":"",[s||o]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(o,l,c){return[{text:o.slice(1)}]}},{regex:/\${\w+/,onMatch:function(o,l,c){var s={text:o.slice(2)};return c.unshift(s),[s]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(o,l,c){var s=c.shift();return this.next=s&&s.tabstopId?"start":"",[s||o]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(o,l,c){var s=c[0];return s.formatFunction=o.slice(2,-1),[c.shift()]},next:"formatString"},t,{regex:/:[\?\-+]?/,onMatch:function(o,l,c){o[1]=="+"&&(c[0].ifEnd=c[0]),o[1]=="?"&&(c[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),e.$tokenizer},e.prototype.tokenizeTmSnippet=function(i,n){return this.getTokenizer().getLineTokens(i,n).tokens.map(function(t){return t.value||t})},e.prototype.getVariableValue=function(i,n,t){if(/^\d+$/.test(n))return(this.variables.__||{})[n]||"";if(/^[A-Z]\d+$/.test(n))return(this.variables[n[0]+"__"]||{})[n.substr(1)]||"";if(n=n.replace(/^TM_/,""),!this.variables.hasOwnProperty(n))return"";var o=this.variables[n];return typeof o=="function"&&(o=this.variables[n](i,n,t)),o??""},e.prototype.tmStrFormat=function(i,n,t){if(!n.fmt)return i;var o=n.flag||"",l=n.guard;l=new RegExp(l,o.replace(/[^gim]/g,""));var c=typeof n.fmt=="string"?this.tokenizeTmSnippet(n.fmt,"formatString"):n.fmt,s=this,p=i.replace(l,function(){var a=s.variables.__;s.variables.__=[].slice.call(arguments);for(var h=s.resolveVariables(c,t),m="E",d=0;d<h.length;d++){var w=h[d];if(typeof w=="object")if(h[d]="",w.changeCase&&w.local){var S=h[d+1];S&&typeof S=="string"&&(w.changeCase=="u"?h[d]=S[0].toUpperCase():h[d]=S[0].toLowerCase(),h[d+1]=S.substr(1))}else w.changeCase&&(m=w.changeCase);else m=="U"?h[d]=w.toUpperCase():m=="L"&&(h[d]=w.toLowerCase())}return s.variables.__=a,h.join("")});return p},e.prototype.tmFormatFunction=function(i,n,t){return n.formatFunction=="upcase"?i.toUpperCase():n.formatFunction=="downcase"?i.toLowerCase():i},e.prototype.resolveVariables=function(i,n){for(var t=[],o="",l=!0,c=0;c<i.length;c++){var s=i[c];if(typeof s=="string"){t.push(s),s==`
`?(l=!0,o=""):l&&(o=/^\t*/.exec(s)[0],l=/\S/.test(s));continue}if(s){if(l=!1,s.fmtString){var p=i.indexOf(s,c+1);p==-1&&(p=i.length),s.fmt=i.slice(c+1,p),c=p}if(s.text){var a=this.getVariableValue(n,s.text,o)+"";s.fmtString&&(a=this.tmStrFormat(a,s,n)),s.formatFunction&&(a=this.tmFormatFunction(a,s,n)),a&&!s.ifEnd?(t.push(a),h(s)):!a&&s.ifEnd&&h(s.ifEnd)}else s.elseEnd?h(s.elseEnd):(s.tabstopId!=null||s.changeCase!=null)&&t.push(s)}}function h(m){var d=i.indexOf(m,c+1);d!=-1&&(c=d)}return t},e.prototype.getDisplayTextForSnippet=function(i,n){var t=O.call(this,i,n);return t.text},e.prototype.insertSnippetForSelection=function(i,n,t){t===void 0&&(t={});var o=O.call(this,i,n,t),l=i.getSelectionRange(),c=i.session.replace(l,o.text),s=new P(i),p=i.inVirtualSelectionMode&&i.selection.index;s.addTabstops(o.tabstops,l.start,c,p)},e.prototype.insertSnippet=function(i,n,t){t===void 0&&(t={});var o=this;if(i.inVirtualSelectionMode)return o.insertSnippetForSelection(i,n,t);i.forEachSelection(function(){o.insertSnippetForSelection(i,n,t)},null,{keepOrder:!0}),i.tabstopManager&&i.tabstopManager.tabNext()},e.prototype.$getScope=function(i){var n=i.session.$mode.$id||"";if(n=n.split("/").pop(),n==="html"||n==="php"){n==="php"&&!i.session.$mode.inlinePhp&&(n="html");var t=i.getCursorPosition(),o=i.session.getState(t.row);typeof o=="object"&&(o=o[0]),o.substring&&(o.substring(0,3)=="js-"?n="javascript":o.substring(0,4)=="css-"?n="css":o.substring(0,4)=="php-"&&(n="php"))}return n},e.prototype.getActiveScopes=function(i){var n=this.$getScope(i),t=[n],o=this.snippetMap;return o[n]&&o[n].includeScopes&&t.push.apply(t,o[n].includeScopes),t.push("_"),t},e.prototype.expandWithTab=function(i,n){var t=this,o=i.forEachSelection(function(){return t.expandSnippetForSelection(i,n)},null,{keepOrder:!0});return o&&i.tabstopManager&&i.tabstopManager.tabNext(),o},e.prototype.expandSnippetForSelection=function(i,n){var t=i.getCursorPosition(),o=i.session.getLine(t.row),l=o.substring(0,t.column),c=o.substr(t.column),s=this.snippetMap,p;return this.getActiveScopes(i).some(function(a){var h=s[a];return h&&(p=this.findMatchingSnippet(h,l,c)),!!p},this),p?(n&&n.dryRun||(i.session.doc.removeInLine(t.row,t.column-p.replaceBefore.length,t.column+p.replaceAfter.length),this.variables.M__=p.matchBefore,this.variables.T__=p.matchAfter,this.insertSnippetForSelection(i,p.content),this.variables.M__=this.variables.T__=null),!0):!1},e.prototype.findMatchingSnippet=function(i,n,t){for(var o=i.length;o--;){var l=i[o];if(!(l.startRe&&!l.startRe.test(n))&&!(l.endRe&&!l.endRe.test(t))&&!(!l.startRe&&!l.endRe))return l.matchBefore=l.startRe?l.startRe.exec(n):[""],l.matchAfter=l.endRe?l.endRe.exec(t):[""],l.replaceBefore=l.triggerRe?l.triggerRe.exec(n)[0]:"",l.replaceAfter=l.endTriggerRe?l.endTriggerRe.exec(t)[0]:"",l}},e.prototype.register=function(i,n){var t=this.snippetMap,o=this.snippetNameMap,l=this;i||(i=[]);function c(a){return a&&!/^\^?\(.*\)\$?$|^\\b$/.test(a)&&(a="(?:"+a+")"),a||""}function s(a,h,m){return a=c(a),h=c(h),a=h+a,a&&a[a.length-1]!="$"&&(a=a+"$"),new RegExp(a)}function p(a){a.scope||(a.scope=n||"_"),n=a.scope,t[n]||(t[n]=[],o[n]={});var h=o[n];if(a.name){var m=h[a.name];m&&l.unregister(m),h[a.name]=a}t[n].push(a),a.prefix&&(a.tabTrigger=a.prefix),!a.content&&a.body&&(a.content=Array.isArray(a.body)?a.body.join(`
`):a.body),a.tabTrigger&&!a.trigger&&(!a.guard&&/^\w/.test(a.tabTrigger)&&(a.guard="\\b"),a.trigger=v.escapeRegExp(a.tabTrigger)),!(!a.trigger&&!a.guard&&!a.endTrigger&&!a.endGuard)&&(a.startRe=s(a.trigger,a.guard),a.triggerRe=new RegExp(a.trigger),a.endRe=s(a.endTrigger,a.endGuard),a.endTriggerRe=new RegExp(a.endTrigger))}Array.isArray(i)?i.forEach(p):Object.keys(i).forEach(function(a){p(i[a])}),this._signal("registerSnippets",{scope:n})},e.prototype.unregister=function(i,n){var t=this.snippetMap,o=this.snippetNameMap;function l(c){var s=o[c.scope||n];if(s&&s[c.name]){delete s[c.name];var p=t[c.scope||n],a=p&&p.indexOf(c);a>=0&&p.splice(a,1)}}i.content?l(i):Array.isArray(i)&&i.forEach(l)},e.prototype.parseSnippetFile=function(i){i=i.replace(/\r/g,"");for(var n=[],t={},o=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,l;l=o.exec(i);){if(l[1])try{t=JSON.parse(l[1]),n.push(t)}catch{}if(l[4])t.content=l[4].replace(/^\t/gm,""),n.push(t),t={};else{var c=l[2],s=l[3];if(c=="regex"){var p=/\/((?:[^\/\\]|\\.)*)|$/g;t.guard=p.exec(s)[1],t.trigger=p.exec(s)[1],t.endTrigger=p.exec(s)[1],t.endGuard=p.exec(s)[1]}else c=="snippet"?(t.tabTrigger=s.match(/^\S*/)[0],t.name||(t.name=s)):c&&(t[c]=s)}}return n},e.prototype.getSnippetByName=function(i,n){var t=this.snippetNameMap,o;return this.getActiveScopes(n).some(function(l){var c=t[l];return c&&(o=c[i]),!!o},this),o},e}();T.implement(k.prototype,y);var O=function(e,i,n){n===void 0&&(n={});var t=e.getCursorPosition(),o=e.session.getLine(t.row),l=e.session.getTabString(),c=o.match(/^\s*/)[0];t.column<c.length&&(c=c.slice(0,t.column)),i=i.replace(/\r/g,"");var s=this.tokenizeTmSnippet(i);s=this.resolveVariables(s,e),s=s.map(function(A){return A==`
`&&!n.excludeExtraIndent?A+c:typeof A=="string"?A.replace(/\t/g,l):A});var p=[];s.forEach(function(A,z){if(typeof A=="object"){var W=A.tabstopId,H=p[W];if(H||(H=p[W]=[],H.index=W,H.value="",H.parents={}),H.indexOf(A)===-1){A.choices&&!H.choices&&(H.choices=A.choices),H.push(A);var j=s.indexOf(A,z+1);if(j!==-1){var G=s.slice(z+1,j),Y=G.some(function(J){return typeof J=="object"});Y&&!H.value?H.value=G:G.length&&(!H.value||typeof H.value!="string")&&(H.value=G.join(""))}}}}),p.forEach(function(A){A.length=0});var a={};function h(A){for(var z=[],W=0;W<A.length;W++){var H=A[W];if(typeof H=="object"){if(a[H.tabstopId])continue;var j=A.lastIndexOf(H,W-1);H=z[j]||{tabstopId:H.tabstopId}}z[W]=H}return z}for(var m=0;m<s.length;m++){var d=s[m];if(typeof d=="object"){var w=d.tabstopId,S=p[w],R=s.indexOf(d,m+1);if(a[w]){a[w]===d&&(delete a[w],Object.keys(a).forEach(function(A){S.parents[A]=!0}));continue}a[w]=d;var I=S.value;typeof I!="string"?I=h(I):d.fmt&&(I=this.tmStrFormat(I,d,e)),s.splice.apply(s,[m+1,Math.max(0,R-m)].concat(I,d)),S.indexOf(d)===-1&&S.push(d)}}var B=0,D=0,U="";return s.forEach(function(A){if(typeof A=="string"){var z=A.split(`
`);z.length>1?(D=z[z.length-1].length,B+=z.length-1):D+=A.length,U+=A}else A&&(A.start?A.end={row:B,column:D}:A.start={row:B,column:D})}),{text:U,tabstops:p,tokens:s}},P=function(){function e(i){if(this.index=0,this.ranges=[],this.tabstops=[],i.tabstopManager)return i.tabstopManager;i.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=v.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(i)}return e.prototype.attach=function(i){this.$openTabstops=null,this.selectedTabstop=null,this.editor=i,this.session=i.session,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},e.prototype.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges.length=0,this.tabstops.length=0,this.selectedTabstop=null,this.editor.off("change",this.$onChange),this.editor.off("changeSelection",this.$onChangeSelection),this.editor.off("changeSession",this.$onChangeSession),this.editor.commands.off("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.session=null,this.editor=null},e.prototype.onChange=function(i){for(var n=i.action[0]=="r",t=this.selectedTabstop||{},o=t.parents||{},l=this.tabstops.slice(),c=0;c<l.length;c++){var s=l[c],p=s==t||o[s.index];if(s.rangeList.$bias=p?0:1,i.action=="remove"&&s!==t){var a=s.parents&&s.parents[t.index],h=s.rangeList.pointIndex(i.start,a);h=h<0?-h-1:h+1;var m=s.rangeList.pointIndex(i.end,a);m=m<0?-m-1:m-1;for(var d=s.rangeList.ranges.slice(h,m),w=0;w<d.length;w++)this.removeRange(d[w])}s.rangeList.$onChange(i)}var S=this.session;!this.$inChange&&n&&S.getLength()==1&&!S.getValue()&&this.detach()},e.prototype.updateLinkedFields=function(){var i=this.selectedTabstop;if(!(!i||!i.hasLinkedRanges||!i.firstNonLinked)){this.$inChange=!0;for(var n=this.session,t=n.getTextRange(i.firstNonLinked),o=0;o<i.length;o++){var l=i[o];if(l.linked){var c=l.original,s=C.snippetManager.tmStrFormat(t,c,this.editor);n.replace(l,s)}}this.$inChange=!1}},e.prototype.onAfterExec=function(i){i.command&&!i.command.readOnly&&this.updateLinkedFields()},e.prototype.onChangeSelection=function(){if(this.editor){for(var i=this.editor.selection.lead,n=this.editor.selection.anchor,t=this.editor.selection.isEmpty(),o=0;o<this.ranges.length;o++)if(!this.ranges[o].linked){var l=this.ranges[o].contains(i.row,i.column),c=t||this.ranges[o].contains(n.row,n.column);if(l&&c)return}this.detach()}},e.prototype.onChangeSession=function(){this.detach()},e.prototype.tabNext=function(i){var n=this.tabstops.length,t=this.index+(i||1);t=Math.min(Math.max(t,1),n),t==n&&(t=0),this.selectTabstop(t),this.updateTabstopMarkers(),t===0&&this.detach()},e.prototype.selectTabstop=function(i){this.$openTabstops=null;var n=this.tabstops[this.index];if(n&&this.addTabstopMarkers(n),this.index=i,n=this.tabstops[this.index],!(!n||!n.length)){this.selectedTabstop=n;var t=n.firstNonLinked||n;if(n.choices&&(t.cursor=t.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange(t);else{var o=this.editor.multiSelect;o.toSingleRange(t);for(var l=0;l<n.length;l++)n.hasLinkedRanges&&n[l].linked||o.addRange(n[l].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},e.prototype.addTabstops=function(i,n,t){var o=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!i[0]){var l=g.fromPoints(t,t);u(l.start,n),u(l.end,n),i[0]=[l],i[0].index=0}var c=this.index,s=[c+1,0],p=this.ranges,a=this.snippetId=(this.snippetId||0)+1;i.forEach(function(h,m){var d=this.$openTabstops[m]||h;d.snippetId=a;for(var w=0;w<h.length;w++){var S=h[w],R=g.fromPoints(S.start,S.end||S.start);M(R.start,n),M(R.end,n),R.original=S,R.tabstop=d,p.push(R),d!=h?d.unshift(R):d[w]=R,S.fmtString||d.firstNonLinked&&o?(R.linked=!0,d.hasLinkedRanges=!0):d.firstNonLinked||(d.firstNonLinked=R)}d.firstNonLinked||(d.hasLinkedRanges=!1),d===h&&(s.push(d),this.$openTabstops[m]=d),this.addTabstopMarkers(d),d.rangeList=d.rangeList||new b,d.rangeList.$bias=0,d.rangeList.addList(d)},this),s.length>2&&(this.tabstops.length&&s.push(s.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,s))},e.prototype.addTabstopMarkers=function(i){var n=this.session;i.forEach(function(t){t.markerId||(t.markerId=n.addMarker(t,"ace_snippet-marker","text"))})},e.prototype.removeTabstopMarkers=function(i){var n=this.session;i.forEach(function(t){n.removeMarker(t.markerId),t.markerId=null})},e.prototype.updateTabstopMarkers=function(){if(this.selectedTabstop){var i=this.selectedTabstop.snippetId;this.selectedTabstop.index===0&&i--,this.tabstops.forEach(function(n){n.snippetId===i?this.addTabstopMarkers(n):this.removeTabstopMarkers(n)},this)}},e.prototype.removeRange=function(i){var n=i.tabstop.indexOf(i);n!=-1&&i.tabstop.splice(n,1),n=this.ranges.indexOf(i),n!=-1&&this.ranges.splice(n,1),n=i.tabstop.rangeList.ranges.indexOf(i),n!=-1&&i.tabstop.splice(n,1),this.session.removeMarker(i.markerId),i.tabstop.length||(n=this.tabstops.indexOf(i.tabstop),n!=-1&&this.tabstops.splice(n,1),this.tabstops.length||this.detach())},e}();P.prototype.keyboardHandler=new $,P.prototype.keyboardHandler.bindKeys({Tab:function(e){C.snippetManager&&C.snippetManager.expandWithTab(e)||(e.tabstopManager.tabNext(1),e.renderer.scrollCursorIntoView())},"Shift-Tab":function(e){e.tabstopManager.tabNext(-1),e.renderer.scrollCursorIntoView()},Esc:function(e){e.tabstopManager.detach()}});var M=function(e,i){e.row==0&&(e.column+=i.column),e.row+=i.row},u=function(e,i){e.row==i.row&&(e.column-=i.column),e.row-=i.row};E.importCssString(`
.ace_snippet-marker {
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    background: rgba(194, 193, 208, 0.09);
    border: 1px dotted rgba(211, 208, 235, 0.62);
    position: absolute;
}`,"snippets.css",!1),C.snippetManager=new k;var r=f("./editor").Editor;(function(){this.insertSnippet=function(e,i){return C.snippetManager.insertSnippet(this,e,i)},this.expandSnippet=function(e){return C.snippetManager.expandWithTab(this,e)}}).call(r.prototype)}),ace.define("ace/autocomplete/inline_screenreader",["require","exports","module"],function(f,C,F){var E=function(){function T(y){this.editor=y,this.screenReaderDiv=document.createElement("div"),this.screenReaderDiv.classList.add("ace_screenreader-only"),this.editor.container.appendChild(this.screenReaderDiv)}return T.prototype.setScreenReaderContent=function(y){for(!this.popup&&this.editor.completer&&this.editor.completer.popup&&(this.popup=this.editor.completer.popup,this.popup.renderer.on("afterRender",function(){var g=this.popup.getRow(),b=this.popup.renderer.$textLayer,$=b.element.childNodes[g-b.config.firstRow];if($){for(var x="doc-tooltip ",L=0;L<this._lines.length;L++)x+="ace-inline-screenreader-line-".concat(L," ");$.setAttribute("aria-describedby",x)}}.bind(this)));this.screenReaderDiv.firstChild;)this.screenReaderDiv.removeChild(this.screenReaderDiv.firstChild);this._lines=y.split(/\r\n|\r|\n/);var v=this.createCodeBlock();this.screenReaderDiv.appendChild(v)},T.prototype.destroy=function(){this.screenReaderDiv.remove()},T.prototype.createCodeBlock=function(){var y=document.createElement("pre");y.setAttribute("id","ace-inline-screenreader");for(var v=0;v<this._lines.length;v++){var g=document.createElement("code");g.setAttribute("id","ace-inline-screenreader-line-".concat(v));var b=document.createTextNode(this._lines[v]);g.appendChild(b),y.appendChild(g)}return y},T}();C.AceInlineScreenReader=E}),ace.define("ace/autocomplete/inline",["require","exports","module","ace/snippets","ace/autocomplete/inline_screenreader"],function(f,C,F){var E=f("../snippets").snippetManager,T=f("./inline_screenreader").AceInlineScreenReader,y=function(){function v(){this.editor=null}return v.prototype.show=function(g,b,$){if($=$||"",g&&this.editor&&this.editor!==g&&(this.hide(),this.editor=null,this.inlineScreenReader=null),!g||!b)return!1;this.inlineScreenReader||(this.inlineScreenReader=new T(g));var x=b.snippet?E.getDisplayTextForSnippet(g,b.snippet):b.value;return b.hideInlinePreview||!x||!x.startsWith($)?!1:(this.editor=g,this.inlineScreenReader.setScreenReaderContent(x),x=x.slice($.length),x===""?g.removeGhostText():g.setGhostText(x),!0)},v.prototype.isOpen=function(){return this.editor?!!this.editor.renderer.$ghostText:!1},v.prototype.hide=function(){return this.editor?(this.editor.removeGhostText(),!0):!1},v.prototype.destroy=function(){this.hide(),this.editor=null,this.inlineScreenReader&&(this.inlineScreenReader.destroy(),this.inlineScreenReader=null)},v}();C.AceInline=y}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom","ace/config","ace/lib/useragent"],function(f,C,F){var E=f("../virtual_renderer").VirtualRenderer,T=f("../editor").Editor,y=f("../range").Range,v=f("../lib/event"),g=f("../lib/lang"),b=f("../lib/dom"),$=f("../config").nls,x=f("./../lib/useragent"),L=function(M){return"suggest-aria-id:".concat(M)},N=x.isSafari?"menu":"listbox",_=x.isSafari?"menuitem":"option",k=x.isSafari?"aria-current":"aria-selected",O=function(M){var u=new E(M);u.$maxLines=4;var r=new T(u);return r.setHighlightActiveLine(!1),r.setShowPrintMargin(!1),r.renderer.setShowGutter(!1),r.renderer.setHighlightGutterLine(!1),r.$mouseHandler.$focusTimeout=0,r.$highlightTagPending=!0,r},P=function(){function M(u){var r=b.createElement("div"),e=O(r);u&&u.appendChild(r),r.style.display="none",e.renderer.content.style.cursor="default",e.renderer.setStyle("ace_autocomplete"),e.renderer.$textLayer.element.setAttribute("role",N),e.renderer.$textLayer.element.setAttribute("aria-roledescription",$("autocomplete.popup.aria-roledescription","Autocomplete suggestions")),e.renderer.$textLayer.element.setAttribute("aria-label",$("autocomplete.popup.aria-label","Autocomplete suggestions")),e.renderer.textarea.setAttribute("aria-hidden","true"),e.setOption("displayIndentGuides",!1),e.setOption("dragDelay",150);var i=function(){};e.focus=i,e.$isFocused=!0,e.renderer.$cursorLayer.restartTimer=i,e.renderer.$cursorLayer.element.style.opacity="0",e.renderer.$maxLines=8,e.renderer.$keepTextAreaAtCursor=!1,e.setHighlightActiveLine(!1),e.session.highlight(""),e.session.$searchHighlight.clazz="ace_highlight-marker",e.on("mousedown",function(p){var a=p.getDocumentPosition();e.selection.moveToPosition(a),o.start.row=o.end.row=a.row,p.stop()});var n,t=new y(-1,0,-1,1/0),o=new y(-1,0,-1,1/0);o.id=e.session.addMarker(o,"ace_active-line","fullLine"),e.setSelectOnHover=function(p){p?t.id&&(e.session.removeMarker(t.id),t.id=null):t.id=e.session.addMarker(t,"ace_line-hover","fullLine")},e.setSelectOnHover(!1),e.on("mousemove",function(p){if(!n){n=p;return}if(!(n.x==p.x&&n.y==p.y)){n=p,n.scrollTop=e.renderer.scrollTop,e.isMouseOver=!0;var a=n.getDocumentPosition().row;t.start.row!=a&&(t.id||e.setRow(a),c(a))}}),e.renderer.on("beforeRender",function(){if(n&&t.start.row!=-1){n.$pos=null;var p=n.getDocumentPosition().row;t.id||e.setRow(p),c(p,!0)}}),e.renderer.on("afterRender",function(){for(var p=e.renderer.$textLayer,a=p.config.firstRow,h=p.config.lastRow;a<=h;a++){var m=p.element.childNodes[a-p.config.firstRow];m.setAttribute("role",_),m.setAttribute("aria-roledescription",$("autocomplete.popup.item.aria-roledescription","item")),m.setAttribute("aria-setsize",e.data.length),m.setAttribute("aria-describedby","doc-tooltip"),m.setAttribute("aria-posinset",a+1);var d=e.getData(a);if(d){var w="".concat(d.caption||d.value).concat(d.meta?", ".concat(d.meta):"");m.setAttribute("aria-label",w)}var S=m.querySelectorAll(".ace_completion-highlight");S.forEach(function(R){R.setAttribute("role","mark")})}}),e.renderer.on("afterRender",function(){var p=e.getRow(),a=e.renderer.$textLayer,h=a.element.childNodes[p-a.config.firstRow],m=document.activeElement;if(h!==e.selectedNode&&e.selectedNode&&(b.removeCssClass(e.selectedNode,"ace_selected"),e.selectedNode.removeAttribute(k),e.selectedNode.removeAttribute("id")),m.removeAttribute("aria-activedescendant"),e.selectedNode=h,h){var d=L(p);b.addCssClass(h,"ace_selected"),h.id=d,a.element.setAttribute("aria-activedescendant",d),m.setAttribute("aria-activedescendant",d),h.setAttribute(k,"true")}});var l=function(){c(-1)},c=function(p,a){p!==t.start.row&&(t.start.row=t.end.row=p,a||e.session._emit("changeBackMarker"),e._emit("changeHoverMarker"))};e.getHoveredRow=function(){return t.start.row},v.addListener(e.container,"mouseout",function(){e.isMouseOver=!1,l()}),e.on("hide",l),e.on("changeSelection",l),e.session.doc.getLength=function(){return e.data.length},e.session.doc.getLine=function(p){var a=e.data[p];return typeof a=="string"?a:a&&a.value||""};var s=e.session.bgTokenizer;return s.$tokenizeRow=function(p){var a=e.data[p],h=[];if(!a)return h;typeof a=="string"&&(a={value:a});var m=a.caption||a.value||a.name;function d(A,z){A&&h.push({type:(a.className||"")+(z||""),value:A})}for(var w=m.toLowerCase(),S=(e.filterText||"").toLowerCase(),R=0,I=0,B=0;B<=S.length;B++)if(B!=I&&(a.matchMask&1<<B||B==S.length)){var D=S.slice(I,B);I=B;var U=w.indexOf(D,R);if(U==-1)continue;d(m.slice(R,U),""),R=U+D.length,d(m.slice(U,R),"completion-highlight")}return d(m.slice(R,m.length),""),h.push({type:"completion-spacer",value:" "}),a.meta&&h.push({type:"completion-meta",value:a.meta}),a.message&&h.push({type:"completion-message",value:a.message}),h},s.$updateOnChange=i,s.start=i,e.session.$computeWidth=function(){return this.screenWidth=0},e.isOpen=!1,e.isTopdown=!1,e.autoSelect=!0,e.filterText="",e.isMouseOver=!1,e.data=[],e.setData=function(p,a){e.filterText=a||"",e.setValue(g.stringRepeat(`
`,p.length),-1),e.data=p||[],e.setRow(0)},e.getData=function(p){return e.data[p]},e.getRow=function(){return o.start.row},e.setRow=function(p){p=Math.max(this.autoSelect?0:-1,Math.min(this.data.length-1,p)),o.start.row!=p&&(e.selection.clearSelection(),o.start.row=o.end.row=p||0,e.session._emit("changeBackMarker"),e.moveCursorTo(p||0,0),e.isOpen&&e._signal("select"))},e.on("changeSelection",function(){e.isOpen&&e.setRow(e.selection.lead.row),e.renderer.scrollCursorIntoView()}),e.hide=function(){this.container.style.display="none",e.anchorPos=null,e.anchor=null,e.isOpen&&(e.isOpen=!1,this._signal("hide"))},e.tryShow=function(p,a,h,m){if(!m&&e.isOpen&&e.anchorPos&&e.anchor&&e.anchorPos.top===p.top&&e.anchorPos.left===p.left&&e.anchor===h)return!0;var d=this.container,w=this.renderer.scrollBar.width||10,S=window.innerHeight-w,R=window.innerWidth-w,I=this.renderer,B=I.$maxLines*a*1.4,D={top:0,bottom:0},U=S-p.top-3*this.$borderSize-a,A=p.top-3*this.$borderSize;h||(A<=U||U>=B?h="bottom":h="top"),h==="top"?(D.bottom=p.top-this.$borderSize,D.top=D.bottom-B):h==="bottom"&&(D.top=p.top+a+this.$borderSize,D.bottom=D.top+B);var z=D.top>=0&&D.bottom<=S;if(!m&&!z)return!1;z?I.$maxPixelHeight=null:h==="top"?I.$maxPixelHeight=A:I.$maxPixelHeight=U,h==="top"?(d.style.top="",d.style.bottom=S+w-D.bottom+"px",e.isTopdown=!1):(d.style.top=D.top+"px",d.style.bottom="",e.isTopdown=!0),d.style.display="";var W=p.left;return W+d.offsetWidth>R&&(W=R-d.offsetWidth),d.style.left=W+"px",d.style.right="",e.isOpen||(e.isOpen=!0,this._signal("show"),n=null),e.anchorPos=p,e.anchor=h,!0},e.show=function(p,a,h){this.tryShow(p,a,h?"bottom":void 0,!0)},e.goTo=function(p){var a=this.getRow(),h=this.session.getLength()-1;switch(p){case"up":a=a<=0?h:a-1;break;case"down":a=a>=h?-1:a+1;break;case"start":a=0;break;case"end":a=h;break}this.setRow(a)},e.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},e.$imageSize=0,e.$borderSize=1,e}return M}();b.importCssString(`
.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #CAD6FA;
    z-index: 1;
}
.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {
    background-color: #3a674e;
}
.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid #abbffe;
    margin-top: -1px;
    background: rgba(233,233,253,0.4);
    position: absolute;
    z-index: 2;
}
.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {
    border: 1px solid rgba(109, 150, 13, 0.8);
    background: rgba(58, 103, 78, 0.62);
}
.ace_completion-meta {
    opacity: 0.5;
    margin-left: 0.9em;
}
.ace_completion-message {
    margin-left: 0.9em;
    color: blue;
}
.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #2d69c7;
}
.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{
    color: #93ca12;
}
.ace_editor.ace_autocomplete {
    width: 300px;
    z-index: 200000;
    border: 1px lightgray solid;
    position: fixed;
    box-shadow: 2px 3px 5px rgba(0,0,0,.2);
    line-height: 1.4;
    background: #fefefe;
    color: #111;
}
.ace_dark.ace_editor.ace_autocomplete {
    border: 1px #484747 solid;
    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);
    line-height: 1.4;
    background: #25282c;
    color: #c1c1c1;
}
.ace_autocomplete .ace_text-layer  {
    width: calc(100% - 8px);
}
.ace_autocomplete .ace_line {
    display: flex;
    align-items: center;
}
.ace_autocomplete .ace_line > * {
    min-width: 0;
    flex: 0 0 auto;
}
.ace_autocomplete .ace_line .ace_ {
    flex: 0 1 auto;
    overflow: hidden;
    text-overflow: ellipsis;
}
.ace_autocomplete .ace_completion-spacer {
    flex: 1;
}
.ace_autocomplete.ace_loading:after  {
    content: "";
    position: absolute;
    top: 0px;
    height: 2px;
    width: 8%;
    background: blue;
    z-index: 100;
    animation: ace_progress 3s infinite linear;
    animation-delay: 300ms;
    transform: translateX(-100%) scaleX(1);
}
@keyframes ace_progress {
    0% { transform: translateX(-100%) scaleX(1) }
    50% { transform: translateX(625%) scaleX(2) } 
    100% { transform: translateX(1500%) scaleX(3) } 
}
@media (prefers-reduced-motion) {
    .ace_autocomplete.ace_loading:after {
        transform: translateX(625%) scaleX(2);
        animation: none;
     }
}
`,"autocompletion.css",!1),C.AcePopup=P,C.$singleLineEditor=O,C.getAriaId=L}),ace.define("ace/autocomplete/util",["require","exports","module"],function(f,C,F){C.parForEach=function(T,y,v){var g=0,b=T.length;b===0&&v();for(var $=0;$<b;$++)y(T[$],function(x,L){g++,g===b&&v(x,L)})};var E=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;C.retrievePrecedingIdentifier=function(T,y,v){v=v||E;for(var g=[],b=y-1;b>=0&&v.test(T[b]);b--)g.push(T[b]);return g.reverse().join("")},C.retrieveFollowingIdentifier=function(T,y,v){v=v||E;for(var g=[],b=y;b<T.length&&v.test(T[b]);b++)g.push(T[b]);return g},C.getCompletionPrefix=function(T){var y=T.getCursorPosition(),v=T.session.getLine(y.row),g;return T.completers.forEach(function(b){b.identifierRegexps&&b.identifierRegexps.forEach(function($){!g&&$&&(g=this.retrievePrecedingIdentifier(v,y.column,$))}.bind(this))}.bind(this)),g||this.retrievePrecedingIdentifier(v,y.column)},C.triggerAutocomplete=function(T,v){var v=v??T.session.getPrecedingCharacter();return T.completers.some(function(g){if(g.triggerCharacters&&Array.isArray(g.triggerCharacters))return g.triggerCharacters.includes(v)})}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/inline","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config","ace/lib/event","ace/lib/scroll"],function(f,C,F){var E=f("./keyboard/hash_handler").HashHandler,T=f("./autocomplete/popup").AcePopup,y=f("./autocomplete/inline").AceInline,v=f("./autocomplete/popup").getAriaId,g=f("./autocomplete/util"),b=f("./lib/lang"),$=f("./lib/dom"),x=f("./snippets").snippetManager,L=f("./config"),N=f("./lib/event"),_=f("./lib/scroll").preventParentScroll,k=function(u,r){r.completer&&r.completer.destroy()},O=function(){function u(){this.autoInsert=!1,this.autoSelect=!0,this.autoShown=!1,this.exactMatch=!1,this.inlineEnabled=!1,this.keyboardHandler=new E,this.keyboardHandler.bindKeys(this.commands),this.parentNode=null,this.setSelectOnHover=!1,this.hasSeen=new Set,this.showLoadingState=!1,this.stickySelectionDelay=500,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.onLayoutChange=this.onLayoutChange.bind(this),this.changeTimer=b.delayedCall(function(){this.updateCompletions(!0)}.bind(this)),this.tooltipTimer=b.delayedCall(this.updateDocTooltip.bind(this),50),this.popupTimer=b.delayedCall(this.$updatePopupPosition.bind(this),50),this.stickySelectionTimer=b.delayedCall(function(){this.stickySelection=!0}.bind(this),this.stickySelectionDelay),this.$firstOpenTimer=b.delayedCall(function(){var r=this.completionProvider&&this.completionProvider.initialPosition;this.autoShown||this.popup&&this.popup.isOpen||!r||this.editor.completers.length===0||(this.completions=new M(u.completionsForLoading),this.openPopup(this.editor,r.prefix,!1),this.popup.renderer.setStyle("ace_loading",!0))}.bind(this),this.stickySelectionDelay)}return Object.defineProperty(u,"completionsForLoading",{get:function(){return[{caption:L.nls("autocomplete.loading","Loading..."),value:""}]},enumerable:!1,configurable:!0}),u.prototype.$init=function(){return this.popup=new T(this.parentNode||document.body||document.documentElement),this.popup.on("click",function(r){this.insertMatch(),r.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.$onPopupShow.bind(this)),this.popup.on("hide",this.$onHidePopup.bind(this)),this.popup.on("select",this.$onPopupChange.bind(this)),N.addListener(this.popup.container,"mouseout",this.mouseOutListener.bind(this)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup.renderer.on("afterRender",this.$onPopupRender.bind(this)),this.popup},u.prototype.$initInline=function(){if(!(!this.inlineEnabled||this.inlineRenderer))return this.inlineRenderer=new y,this.inlineRenderer},u.prototype.getPopup=function(){return this.popup||this.$init()},u.prototype.$onHidePopup=function(){this.inlineRenderer&&this.inlineRenderer.hide(),this.hideDocTooltip(),this.stickySelectionTimer.cancel(),this.popupTimer.cancel(),this.stickySelection=!1},u.prototype.$seen=function(r){!this.hasSeen.has(r)&&r&&r.completer&&r.completer.onSeen&&typeof r.completer.onSeen=="function"&&(r.completer.onSeen(this.editor,r),this.hasSeen.add(r))},u.prototype.$onPopupChange=function(r){if(this.inlineRenderer&&this.inlineEnabled){var e=r?null:this.popup.getData(this.popup.getRow());if(this.$updateGhostText(e),this.popup.isMouseOver&&this.setSelectOnHover){this.tooltipTimer.call(null,null);return}this.popupTimer.schedule(),this.tooltipTimer.schedule()}else this.popupTimer.call(null,null),this.tooltipTimer.call(null,null)},u.prototype.$updateGhostText=function(r){var e=this.base.row,i=this.base.column,n=this.editor.getCursorPosition().column,t=this.editor.session.getLine(e).slice(i,n);this.inlineRenderer.show(this.editor,r,t)?this.$seen(r):this.inlineRenderer.hide()},u.prototype.$onPopupRender=function(){var r=this.inlineRenderer&&this.inlineEnabled;if(this.completions&&this.completions.filtered&&this.completions.filtered.length>0)for(var e=this.popup.getFirstVisibleRow();e<=this.popup.getLastVisibleRow();e++){var i=this.popup.getData(e);i&&(!r||i.hideInlinePreview)&&this.$seen(i)}},u.prototype.$onPopupShow=function(r){this.$onPopupChange(r),this.stickySelection=!1,this.stickySelectionDelay>=0&&this.stickySelectionTimer.schedule(this.stickySelectionDelay)},u.prototype.observeLayoutChanges=function(){if(!(this.$elements||!this.editor)){window.addEventListener("resize",this.onLayoutChange,{passive:!0}),window.addEventListener("wheel",this.mousewheelListener);for(var r=this.editor.container.parentNode,e=[];r;)e.push(r),r.addEventListener("scroll",this.onLayoutChange,{passive:!0}),r=r.parentNode;this.$elements=e}},u.prototype.unObserveLayoutChanges=function(){var r=this;window.removeEventListener("resize",this.onLayoutChange,{passive:!0}),window.removeEventListener("wheel",this.mousewheelListener),this.$elements&&this.$elements.forEach(function(e){e.removeEventListener("scroll",r.onLayoutChange,{passive:!0})}),this.$elements=null},u.prototype.onLayoutChange=function(){if(!this.popup.isOpen)return this.unObserveLayoutChanges();this.$updatePopupPosition(),this.updateDocTooltip()},u.prototype.$updatePopupPosition=function(){var r=this.editor,e=r.renderer,i=e.layerConfig.lineHeight,n=e.$cursorLayer.getPixelPosition(this.base,!0);n.left-=this.popup.getTextLeftOffset();var t=r.container.getBoundingClientRect();n.top+=t.top-e.layerConfig.offset,n.left+=t.left-r.renderer.scrollLeft,n.left+=e.gutterWidth;var o={top:n.top,left:n.left};e.$ghostText&&e.$ghostTextWidget&&this.base.row===e.$ghostText.position.row&&(o.top+=e.$ghostTextWidget.el.offsetHeight);var l=r.container.getBoundingClientRect().bottom-i,c=l<o.top?{top:l,left:o.left}:o;this.popup.tryShow(c,i,"bottom")||this.popup.tryShow(n,i,"top")||this.popup.show(n,i)},u.prototype.openPopup=function(r,e,i){this.$firstOpenTimer.cancel(),this.popup||this.$init(),this.inlineEnabled&&!this.inlineRenderer&&this.$initInline(),this.popup.autoSelect=this.autoSelect,this.popup.setSelectOnHover(this.setSelectOnHover);var n=this.popup.getRow(),t=this.popup.data[n];this.popup.setData(this.completions.filtered,this.completions.filterText),this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({activeDescendant:v(this.popup.getRow()),inline:this.inlineEnabled}),r.keyBinding.addKeyboardHandler(this.keyboardHandler);var o;this.stickySelection&&(o=this.popup.data.indexOf(t)),(!o||o===-1)&&(o=0),this.popup.setRow(this.autoSelect?o:-1),o===n&&t!==this.completions.filtered[o]&&this.$onPopupChange();var l=this.inlineRenderer&&this.inlineEnabled;if(o===n&&l){var c=this.popup.getData(this.popup.getRow());this.$updateGhostText(c)}i||(this.popup.setTheme(r.getTheme()),this.popup.setFontSize(r.getFontSize()),this.$updatePopupPosition(),this.tooltipNode&&this.updateDocTooltip()),this.changeTimer.cancel(),this.observeLayoutChanges()},u.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener)),this.$firstOpenTimer.cancel(),this.changeTimer.cancel(),this.hideDocTooltip(),this.completionProvider&&this.completionProvider.detach(),this.popup&&this.popup.isOpen&&this.popup.hide(),this.popup&&this.popup.renderer&&this.popup.renderer.off("afterRender",this.$onPopupRender),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null,this.unObserveLayoutChanges()},u.prototype.changeListener=function(r){var e=this.editor.selection.lead;(e.row!=this.base.row||e.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},u.prototype.blurListener=function(r){var e=document.activeElement,i=this.editor.textInput.getElement(),n=r.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(r.relatedTarget),t=this.popup&&this.popup.container;e!=i&&e.parentNode!=t&&!n&&e!=this.tooltipNode&&r.relatedTarget!=i&&this.detach()},u.prototype.mousedownListener=function(r){this.detach()},u.prototype.mousewheelListener=function(r){this.popup&&!this.popup.isMouseOver&&this.detach()},u.prototype.mouseOutListener=function(r){this.popup.isOpen&&this.$updatePopupPosition()},u.prototype.goTo=function(r){this.popup.goTo(r)},u.prototype.insertMatch=function(r,e){if(r||(r=this.popup.getData(this.popup.getRow())),!r)return!1;if(r.value==="")return this.detach();var i=this.completions,n=this.getCompletionProvider().insertMatch(this.editor,r,i.filterText,e);return this.completions==i&&this.detach(),n},u.prototype.showPopup=function(r,e){this.editor&&this.detach(),this.activated=!0,this.editor=r,r.completer!=this&&(r.completer&&r.completer.detach(),r.completer=this),r.on("changeSelection",this.changeListener),r.on("blur",this.blurListener),r.on("mousedown",this.mousedownListener),r.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,e)},u.prototype.getCompletionProvider=function(r){return this.completionProvider||(this.completionProvider=new P(r)),this.completionProvider},u.prototype.gatherCompletions=function(r,e){return this.getCompletionProvider().gatherCompletions(r,e)},u.prototype.updateCompletions=function(r,e){if(r&&this.base&&this.completions){var n=this.editor.getCursorPosition(),t=this.editor.session.getTextRange({start:this.base,end:n});if(t==this.completions.filterText)return;if(this.completions.setFilter(t),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==t&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,t,r);return}if(e&&e.matches){var n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new M(e.matches),this.getCompletionProvider().completions=this.completions,this.openPopup(this.editor,"",r)}var i=this.editor.getSession(),n=this.editor.getCursorPosition(),t=g.getCompletionPrefix(this.editor);this.base=i.doc.createAnchor(n.row,n.column-t.length),this.base.$insertRight=!0;var o={exactMatch:this.exactMatch,ignoreCaption:this.ignoreCaption};this.getCompletionProvider({prefix:t,pos:n}).provideCompletions(this.editor,o,function(l,c,s){var p=c.filtered,a=g.getCompletionPrefix(this.editor);if(this.$firstOpenTimer.cancel(),s){if(!p.length){var h=!this.autoShown&&this.emptyMessage;if(typeof h=="function"&&(h=this.emptyMessage(a)),h){var m=[{caption:h,value:""}];this.completions=new M(m),this.openPopup(this.editor,a,r),this.popup.renderer.setStyle("ace_loading",!1),this.popup.renderer.setStyle("ace_empty-message",!0);return}return this.detach()}if(p.length==1&&p[0].value==a&&!p[0].snippet)return this.detach();if(this.autoInsert&&!this.autoShown&&p.length==1)return this.insertMatch(p[0])}this.completions=!s&&this.showLoadingState?new M(u.completionsForLoading.concat(p),c.filterText):c,this.openPopup(this.editor,a,r),this.popup.renderer.setStyle("ace_empty-message",!1),this.popup.renderer.setStyle("ace_loading",!s)}.bind(this)),this.showLoadingState&&!this.autoShown&&!(this.popup&&this.popup.isOpen)&&this.$firstOpenTimer.delay(this.stickySelectionDelay/2)},u.prototype.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},u.prototype.updateDocTooltip=function(){var r=this.popup,e=this.completions&&this.completions.filtered,i=e&&(e[r.getHoveredRow()]||e[r.getRow()]),n=null;if(!i||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();for(var t=this.editor.completers.length,o=0;o<t;o++){var l=this.editor.completers[o];if(l.getDocTooltip&&i.completerId===l.id){n=l.getDocTooltip(i);break}}if(!n&&typeof i!="string"&&(n=i),typeof n=="string"&&(n={docText:n}),!n||!(n.docHTML||n.docText))return this.hideDocTooltip();this.showDocTooltip(n)},u.prototype.showDocTooltip=function(r){this.tooltipNode||(this.tooltipNode=$.createElement("div"),this.tooltipNode.style.margin="0",this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.style.overscrollBehavior="contain",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this),this.tooltipNode.id="doc-tooltip",this.tooltipNode.setAttribute("role","tooltip"),this.tooltipNode.addEventListener("wheel",_));var e=this.editor.renderer.theme;this.tooltipNode.className="ace_tooltip ace_doc-tooltip "+(e.isDark?"ace_dark ":"")+(e.cssClass||"");var i=this.tooltipNode;r.docHTML?i.innerHTML=r.docHTML:r.docText&&(i.textContent=r.docText),i.parentNode||this.popup.container.appendChild(this.tooltipNode);var n=this.popup,t=n.container.getBoundingClientRect(),o=400,l=300,c=n.renderer.scrollBar.width||10,s=t.left,p=window.innerWidth-t.right-c,a=n.isTopdown?t.top:window.innerHeight-c-t.bottom,h=[Math.min(p/o,1),Math.min(s/o,1),Math.min(a/l*.9)],m=Math.max.apply(Math,h),d=i.style;d.display="block",m==h[0]?(d.left=t.right+1+"px",d.right="",d.maxWidth=o*m+"px",d.top=t.top+"px",d.bottom="",d.maxHeight=Math.min(window.innerHeight-c-t.top,l)+"px"):m==h[1]?(d.right=window.innerWidth-t.left+"px",d.left="",d.maxWidth=o*m+"px",d.top=t.top+"px",d.bottom="",d.maxHeight=Math.min(window.innerHeight-c-t.top,l)+"px"):m==h[2]&&(d.left=window.innerWidth-t.left+"px",d.maxWidth=Math.min(o,window.innerWidth)+"px",n.isTopdown?(d.top=t.bottom+"px",d.left=t.left+"px",d.right="",d.bottom="",d.maxHeight=Math.min(window.innerHeight-c-t.bottom,l)+"px"):(d.top=n.container.offsetTop-i.offsetHeight+"px",d.left=t.left+"px",d.right="",d.bottom="",d.maxHeight=Math.min(n.container.offsetTop,l)+"px"))},u.prototype.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var r=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==r&&this.editor.focus(),this.tooltipNode=null,r.parentNode&&r.parentNode.removeChild(r)}},u.prototype.onTooltipClick=function(r){for(var e=r.target;e&&e!=this.tooltipNode;){if(e.nodeName=="A"&&e.href){e.rel="noreferrer",e.target="_blank";break}e=e.parentNode}},u.prototype.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var r=this.popup.container;r&&r.parentNode&&r.parentNode.removeChild(r)}this.editor&&this.editor.completer==this&&(this.editor.off("destroy",k),this.editor.completer=null),this.inlineRenderer=this.popup=this.editor=null},u.for=function(r){return r.completer instanceof u||(r.completer&&(r.completer.destroy(),r.completer=null),L.get("sharedPopups")?(u.$sharedInstance||(u.$sharedInstance=new u),r.completer=u.$sharedInstance):(r.completer=new u,r.once("destroy",k))),r.completer},u}();O.prototype.commands={Up:function(u){u.completer.goTo("up")},Down:function(u){u.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(u){u.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(u){u.completer.goTo("end")},Esc:function(u){u.completer.detach()},Return:function(u){return u.completer.insertMatch()},"Shift-Return":function(u){u.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(u){var r=u.completer.insertMatch();if(!r&&!u.tabstopManager)u.completer.goTo("down");else return r},Backspace:function(u){u.execCommand("backspace");var r=g.getCompletionPrefix(u);!r&&u.completer&&u.completer.detach()},PageUp:function(u){u.completer.popup.gotoPageUp()},PageDown:function(u){u.completer.popup.gotoPageDown()}},O.startCommand={name:"startAutocomplete",exec:function(u,r){var e=O.for(u);e.autoInsert=!1,e.autoSelect=!0,e.autoShown=!1,e.showPopup(u,r),e.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var P=function(){function u(r){this.initialPosition=r,this.active=!0}return u.prototype.insertByIndex=function(r,e,i){return!this.completions||!this.completions.filtered?!1:this.insertMatch(r,this.completions.filtered[e],i)},u.prototype.insertMatch=function(r,e,i){if(!e)return!1;if(r.startOperation({command:{name:"insertMatch"}}),e.completer&&e.completer.insertMatch)e.completer.insertMatch(r,e);else{if(!this.completions)return!1;var n=this.completions.filterText.length,t=0;if(e.range&&e.range.start.row===e.range.end.row&&(n-=this.initialPosition.prefix.length,n+=this.initialPosition.pos.column-e.range.start.column,t+=e.range.end.column-this.initialPosition.pos.column),n||t){var o;r.selection.getAllRanges?o=r.selection.getAllRanges():o=[r.getSelectionRange()];for(var l=0,c;c=o[l];l++)c.start.column-=n,c.end.column+=t,r.session.remove(c)}e.snippet?x.insertSnippet(r,e.snippet):this.$insertString(r,e),e.completer&&e.completer.onInsert&&typeof e.completer.onInsert=="function"&&e.completer.onInsert(r,e),e.command&&e.command==="startAutocomplete"&&r.execCommand(e.command)}return r.endOperation(),!0},u.prototype.$insertString=function(r,e){var i=e.value||e;r.execCommand("insertstring",i)},u.prototype.gatherCompletions=function(r,e){var i=r.getSession(),n=r.getCursorPosition(),t=g.getCompletionPrefix(r),o=[];this.completers=r.completers;var l=r.completers.length;return r.completers.forEach(function(c,s){c.getCompletions(r,i,n,t,function(p,a){c.hideInlinePreview&&(a=a.map(function(h){return Object.assign(h,{hideInlinePreview:c.hideInlinePreview})})),!p&&a&&(o=o.concat(a)),e(null,{prefix:g.getCompletionPrefix(r),matches:o,finished:--l===0})})}),!0},u.prototype.provideCompletions=function(r,e,i){var n=function(c){var s=c.prefix,p=c.matches;this.completions=new M(p),e.exactMatch&&(this.completions.exactMatch=!0),e.ignoreCaption&&(this.completions.ignoreCaption=!0),this.completions.setFilter(s),(c.finished||this.completions.filtered.length)&&i(null,this.completions,c.finished)}.bind(this),t=!0,o=null;if(this.gatherCompletions(r,function(c,s){if(this.active){c&&(i(c,[],!0),this.detach());var p=s.prefix;if(p.indexOf(s.prefix)===0){if(t){o=s;return}n(s)}}}.bind(this)),t=!1,o){var l=o;o=null,n(l)}},u.prototype.detach=function(){this.active=!1,this.completers&&this.completers.forEach(function(r){typeof r.cancel=="function"&&r.cancel()})},u}(),M=function(){function u(r,e){this.all=r,this.filtered=r,this.filterText=e||"",this.exactMatch=!1,this.ignoreCaption=!1}return u.prototype.setFilter=function(r){if(r.length>this.filterText&&r.lastIndexOf(this.filterText,0)===0)var e=this.filtered;else var e=this.all;this.filterText=r,e=this.filterCompletions(e,this.filterText),e=e.sort(function(n,t){return t.exactMatch-n.exactMatch||t.$score-n.$score||(n.caption||n.value).localeCompare(t.caption||t.value)});var i=null;e=e.filter(function(n){var t=n.snippet||n.caption||n.value;return t===i?!1:(i=t,!0)}),this.filtered=e},u.prototype.filterCompletions=function(r,e){var i=[],n=e.toUpperCase(),t=e.toLowerCase();e:for(var o=0,l;l=r[o];o++){if(l.skipFilter){l.$score=l.score,i.push(l);continue}var c=!this.ignoreCaption&&l.caption||l.value||l.snippet;if(c){var s=-1,p=0,a=0,h,m;if(this.exactMatch){if(e!==c.substr(0,e.length))continue e}else{var d=c.toLowerCase().indexOf(t);if(d>-1)a=d;else for(var w=0;w<e.length;w++){var S=c.indexOf(t[w],s+1),R=c.indexOf(n[w],s+1);if(h=S>=0&&(R<0||S<R)?S:R,h<0)continue e;m=h-s-1,m>0&&(s===-1&&(a+=10),a+=m,p=p|1<<w),s=h}}l.matchMask=p,l.exactMatch=a?0:1,l.$score=(l.score||0)-a,i.push(l)}}return i},u}();C.Autocomplete=O,C.CompletionProvider=P,C.FilteredList=M}),ace.define("ace/ext/command_bar",["require","exports","module","ace/tooltip","ace/lib/event_emitter","ace/lib/lang","ace/lib/dom","ace/lib/oop","ace/lib/useragent"],function(f,C,F){var E=this&&this.__values||function(i){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&i[n],o=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")},T=f("../tooltip").Tooltip,y=f("../lib/event_emitter").EventEmitter,v=f("../lib/lang"),g=f("../lib/dom"),b=f("../lib/oop"),$=f("../lib/useragent"),x="command_bar_tooltip_button",L="command_bar_button_value",N="command_bar_button_caption",_="command_bar_keybinding",k="command_bar_tooltip",O="MoreOptionsButton",P=100,M=4,u=function(i,n){return n.row>i.row||n.row===i.row&&n.column>i.column?i:n},r={Ctrl:{mac:"^"},Option:{mac:"⌥"},Command:{mac:"⌘"},Cmd:{mac:"⌘"},Shift:"⇧",Left:"←",Right:"→",Up:"↑",Down:"↓"},e=function(){function i(n,t){var o,l;t=t||{},this.parentNode=n,this.tooltip=new T(this.parentNode),this.moreOptions=new T(this.parentNode),this.maxElementsOnTooltip=t.maxElementsOnTooltip||M,this.$alwaysShow=t.alwaysShow||!1,this.eventListeners={},this.elements={},this.commands={},this.tooltipEl=g.buildDom(["div",{class:k}],this.tooltip.getElement()),this.moreOptionsEl=g.buildDom(["div",{class:k+" tooltip_more_options"}],this.moreOptions.getElement()),this.$showTooltipTimer=v.delayedCall(this.$showTooltip.bind(this),t.showDelay||P),this.$hideTooltipTimer=v.delayedCall(this.$hideTooltip.bind(this),t.hideDelay||P),this.$tooltipEnter=this.$tooltipEnter.bind(this),this.$onMouseMove=this.$onMouseMove.bind(this),this.$onChangeScroll=this.$onChangeScroll.bind(this),this.$onEditorChangeSession=this.$onEditorChangeSession.bind(this),this.$scheduleTooltipForHide=this.$scheduleTooltipForHide.bind(this),this.$preventMouseEvent=this.$preventMouseEvent.bind(this);try{for(var c=E(["mousedown","mouseup","click"]),s=c.next();!s.done;s=c.next()){var p=s.value;this.tooltip.getElement().addEventListener(p,this.$preventMouseEvent),this.moreOptions.getElement().addEventListener(p,this.$preventMouseEvent)}}catch(a){o={error:a}}finally{try{s&&!s.done&&(l=c.return)&&l.call(c)}finally{if(o)throw o.error}}}return i.prototype.registerCommand=function(n,t){var o=Object.keys(this.commands).length<this.maxElementsOnTooltip;!o&&!this.elements[O]&&this.$createCommand(O,{name:"···",exec:function(){this.$shouldHideMoreOptions=!1,this.$setMoreOptionsVisibility(!this.isMoreOptionsShown())}.bind(this),type:"checkbox",getValue:function(){return this.isMoreOptionsShown()}.bind(this),enabled:!0},!0),this.$createCommand(n,t,o),this.isShown()&&this.updatePosition()},i.prototype.isShown=function(){return!!this.tooltip&&this.tooltip.isOpen},i.prototype.isMoreOptionsShown=function(){return!!this.moreOptions&&this.moreOptions.isOpen},i.prototype.getAlwaysShow=function(){return this.$alwaysShow},i.prototype.setAlwaysShow=function(n){this.$alwaysShow=n,this.$updateOnHoverHandlers(!this.$alwaysShow),this._signal("alwaysShow",this.$alwaysShow)},i.prototype.attach=function(n){!n||this.isShown()&&this.editor===n||(this.detach(),this.editor=n,this.editor.on("changeSession",this.$onEditorChangeSession),this.editor.session&&(this.editor.session.on("changeScrollLeft",this.$onChangeScroll),this.editor.session.on("changeScrollTop",this.$onChangeScroll)),this.getAlwaysShow()?this.$showTooltip():this.$updateOnHoverHandlers(!0))},i.prototype.updatePosition=function(){if(this.editor){var n=this.editor.renderer,t;if(this.editor.selection.getAllRanges?t=this.editor.selection.getAllRanges():t=[this.editor.getSelectionRange()],!!t.length){for(var o=u(t[0].start,t[0].end),l=0,c;c=t[l];l++)o=u(o,u(c.start,c.end));var s=n.$cursorLayer.getPixelPosition(o,!0),p=this.tooltip.getElement(),a=window.innerWidth,h=window.innerHeight,m=this.editor.container.getBoundingClientRect();s.top+=m.top-n.layerConfig.offset,s.left+=m.left+n.gutterWidth-n.scrollLeft;var d=s.top>=m.top&&s.top<=m.bottom&&s.left>=m.left+n.gutterWidth&&s.left<=m.right;if(!d&&this.isShown()){this.$hideTooltip();return}else if(d&&!this.isShown()&&this.getAlwaysShow()){this.$showTooltip();return}var w=s.top-p.offsetHeight,S=Math.min(a-p.offsetWidth,s.left),R=w>=0&&w+p.offsetHeight<=h&&S>=0&&S+p.offsetWidth<=a;if(!R){this.$hideTooltip();return}if(this.tooltip.setPosition(S,w),this.isMoreOptionsShown()){w=w+p.offsetHeight,S=this.elements[O].getBoundingClientRect().left;var I=this.moreOptions.getElement(),h=window.innerHeight;w+I.offsetHeight>h&&(w-=p.offsetHeight+I.offsetHeight),S+I.offsetWidth>a&&(S=a-I.offsetWidth),this.moreOptions.setPosition(S,w)}}}},i.prototype.update=function(){Object.keys(this.elements).forEach(this.$updateElement.bind(this))},i.prototype.detach=function(){this.tooltip.hide(),this.moreOptions.hide(),this.$updateOnHoverHandlers(!1),this.editor&&(this.editor.off("changeSession",this.$onEditorChangeSession),this.editor.session&&(this.editor.session.off("changeScrollLeft",this.$onChangeScroll),this.editor.session.off("changeScrollTop",this.$onChangeScroll))),this.$mouseInTooltip=!1,this.editor=null},i.prototype.destroy=function(){this.tooltip&&this.moreOptions&&(this.detach(),this.tooltip.destroy(),this.moreOptions.destroy()),this.eventListeners={},this.commands={},this.elements={},this.tooltip=this.moreOptions=this.parentNode=null},i.prototype.$createCommand=function(n,t,o){var l=o?this.tooltipEl:this.moreOptionsEl,c=[],s=t.bindKey;s&&(typeof s=="object"&&(s=$.isMac?s.mac:s.win),s=s.split("|")[0],c=s.split("-"),c=c.map(function(h){if(r[h]){if(typeof r[h]=="string")return r[h];if($.isMac&&r[h].mac)return r[h].mac}return h}));var p;o&&t.iconCssClass?p=["div",{class:["ace_icon_svg",t.iconCssClass].join(" "),"aria-label":t.name+" ("+t.bindKey+")"}]:(p=[["div",{class:L}],["div",{class:N},t.name]],c.length&&p.push(["div",{class:_},c.map(function(h){return["div",h]})])),g.buildDom(["div",{class:[x,t.cssClass||""].join(" "),ref:n},p],l,this.elements),this.commands[n]=t;var a=function(h){this.editor&&this.editor.focus(),this.$shouldHideMoreOptions=this.isMoreOptionsShown(),!this.elements[n].disabled&&t.exec&&t.exec(this.editor),this.$shouldHideMoreOptions&&this.$setMoreOptionsVisibility(!1),this.update(),h.preventDefault()}.bind(this);this.eventListeners[n]=a,this.elements[n].addEventListener("click",a.bind(this)),this.$updateElement(n)},i.prototype.$setMoreOptionsVisibility=function(n){n?(this.moreOptions.setTheme(this.editor.renderer.theme),this.moreOptions.setClassName(k+"_wrapper"),this.moreOptions.show(),this.update(),this.updatePosition()):this.moreOptions.hide()},i.prototype.$onEditorChangeSession=function(n){n.oldSession&&(n.oldSession.off("changeScrollTop",this.$onChangeScroll),n.oldSession.off("changeScrollLeft",this.$onChangeScroll)),this.detach()},i.prototype.$onChangeScroll=function(){this.editor.renderer&&(this.isShown()||this.getAlwaysShow())&&this.editor.renderer.once("afterRender",this.updatePosition.bind(this))},i.prototype.$onMouseMove=function(n){if(!this.$mouseInTooltip){var t=this.editor.getCursorPosition(),o=this.editor.renderer.textToScreenCoordinates(t.row,t.column),l=this.editor.renderer.lineHeight,c=n.clientY>=o.pageY&&n.clientY<o.pageY+l;c?(!this.isShown()&&!this.$showTooltipTimer.isPending()&&this.$showTooltipTimer.delay(),this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.cancel()):(this.isShown()&&!this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.delay(),this.$showTooltipTimer.isPending()&&this.$showTooltipTimer.cancel())}},i.prototype.$preventMouseEvent=function(n){this.editor&&this.editor.focus(),n.preventDefault()},i.prototype.$scheduleTooltipForHide=function(){this.$mouseInTooltip=!1,this.$showTooltipTimer.cancel(),this.$hideTooltipTimer.delay()},i.prototype.$tooltipEnter=function(){this.$mouseInTooltip=!0,this.$showTooltipTimer.isPending()&&this.$showTooltipTimer.cancel(),this.$hideTooltipTimer.isPending()&&this.$hideTooltipTimer.cancel()},i.prototype.$updateOnHoverHandlers=function(n){var t=this.tooltip.getElement(),o=this.moreOptions.getElement();n?(this.editor&&(this.editor.on("mousemove",this.$onMouseMove),this.editor.renderer.getMouseEventTarget().addEventListener("mouseout",this.$scheduleTooltipForHide,!0)),t.addEventListener("mouseenter",this.$tooltipEnter),t.addEventListener("mouseleave",this.$scheduleTooltipForHide),o.addEventListener("mouseenter",this.$tooltipEnter),o.addEventListener("mouseleave",this.$scheduleTooltipForHide)):(this.editor&&(this.editor.off("mousemove",this.$onMouseMove),this.editor.renderer.getMouseEventTarget().removeEventListener("mouseout",this.$scheduleTooltipForHide,!0)),t.removeEventListener("mouseenter",this.$tooltipEnter),t.removeEventListener("mouseleave",this.$scheduleTooltipForHide),o.removeEventListener("mouseenter",this.$tooltipEnter),o.removeEventListener("mouseleave",this.$scheduleTooltipForHide))},i.prototype.$showTooltip=function(){this.isShown()||(this.tooltip.setTheme(this.editor.renderer.theme),this.tooltip.setClassName(k+"_wrapper"),this.tooltip.show(),this.update(),this.updatePosition(),this._signal("show"))},i.prototype.$hideTooltip=function(){this.$mouseInTooltip=!1,this.isShown()&&(this.moreOptions.hide(),this.tooltip.hide(),this._signal("hide"))},i.prototype.$updateElement=function(n){var t=this.commands[n];if(t){var o=this.elements[n],l=t.enabled;if(typeof l=="function"&&(l=l(this.editor)),typeof t.getValue=="function"){var c=t.getValue(this.editor);if(t.type==="text")o.textContent=c;else if(t.type==="checkbox"){var s=c?g.addCssClass:g.removeCssClass,p=o.parentElement===this.tooltipEl;o.ariaChecked=c,p?s(o,"ace_selected"):(o=o.querySelector("."+L),s(o,"ace_checkmark"))}}l&&o.disabled?(g.removeCssClass(o,"ace_disabled"),o.ariaDisabled=o.disabled=!1,o.removeAttribute("disabled")):!l&&!o.disabled&&(g.addCssClass(o,"ace_disabled"),o.ariaDisabled=o.disabled=!0,o.setAttribute("disabled",""))}},i}();b.implement(e.prototype,y),g.importCssString(`
.ace_tooltip.`.concat(k,`_wrapper {
    padding: 0;
}

.ace_tooltip .`).concat(k,` {
    padding: 1px 5px;
    display: flex;
    pointer-events: auto;
}

.ace_tooltip .`).concat(k,`.tooltip_more_options {
    padding: 1px;
    flex-direction: column;
}

div.`).concat(x,` {
    display: inline-flex;
    cursor: pointer;
    margin: 1px;
    border-radius: 2px;
    padding: 2px 5px;
    align-items: center;
}

div.`).concat(x,`.ace_selected,
div.`).concat(x,`:hover:not(.ace_disabled) {
    background-color: rgba(0, 0, 0, 0.1);
}

div.`).concat(x,`.ace_disabled {
    color: #777;
    pointer-events: none;
}

div.`).concat(x,` .ace_icon_svg {
    height: 12px;
    background-color: #000;
}

div.`).concat(x,`.ace_disabled .ace_icon_svg {
    background-color: #777;
}

.`).concat(k,".tooltip_more_options .").concat(x,` {
    display: flex;
}

.`).concat(k,".").concat(L,` {
    display: none;
}

.`).concat(k,".tooltip_more_options .").concat(L,` {
    display: inline-block;
    width: 12px;
}

.`).concat(N,` {
    display: inline-block;
}

.`).concat(_,` {
    margin: 0 2px;
    display: inline-block;
    font-size: 8px;
}

.`).concat(k,".tooltip_more_options .").concat(_,` {
    margin-left: auto;
}

.`).concat(_,` div {
    display: inline-block;
    min-width: 8px;
    padding: 2px;
    margin: 0 1px;
    border-radius: 2px;
    background-color: #ccc;
    text-align: center;
}

.ace_dark.ace_tooltip .`).concat(k,` {
    background-color: #373737;
    color: #eee;
}

.ace_dark div.`).concat(x,`.ace_disabled {
    color: #979797;
}

.ace_dark div.`).concat(x,`.ace_selected,
.ace_dark div.`).concat(x,`:hover:not(.ace_disabled) {
    background-color: rgba(255, 255, 255, 0.1);
}

.ace_dark div.`).concat(x,` .ace_icon_svg {
    background-color: #eee;
}

.ace_dark div.`).concat(x,`.ace_disabled .ace_icon_svg {
    background-color: #979797;
}

.ace_dark .`).concat(x,`.ace_disabled {
    color: #979797;
}

.ace_dark .`).concat(_,` div {
    background-color: #575757;
}

.ace_checkmark::before {
    content: '✓';
}
`),"commandbar.css",!1),C.CommandBarTooltip=e,C.TOOLTIP_CLASS_NAME=k,C.BUTTON_CLASS_NAME=x}),ace.define("ace/marker_group",["require","exports","module"],function(f,C,F){var E=function(){function T(y,v){v&&(this.markerType=v.markerType),this.markers=[],this.session=y,y.addDynamicMarker(this)}return T.prototype.getMarkerAtPosition=function(y){return this.markers.find(function(v){return v.range.contains(y.row,y.column)})},T.prototype.markersComparator=function(y,v){return y.range.start.row-v.range.start.row},T.prototype.setMarkers=function(y){this.markers=y.sort(this.markersComparator).slice(0,this.MAX_MARKERS),this.session._signal("changeBackMarker")},T.prototype.update=function(y,v,g,b){if(!(!this.markers||!this.markers.length))for(var $=b.firstRow,x=b.lastRow,L,N=0,_=0,k=0;k<this.markers.length;k++){var O=this.markers[k];if(!(O.range.end.row<$)&&!(O.range.start.row>x)&&(O.range.start.row===_?N++:(_=O.range.start.row,N=0),!(N>200))){var P=O.range.clipRows($,x);if(!(P.start.row===P.end.row&&P.start.column===P.end.column)){var M=P.toScreenRange(g);if(M.isEmpty()){L=g.getNextFoldLine(P.end.row,L),L&&L.end.row>P.end.row&&($=L.end.row);continue}this.markerType==="fullLine"?v.drawFullLineMarker(y,M,O.className,b):M.isMultiLine()?this.markerType==="line"?v.drawMultiLineMarker(y,M,O.className,b):v.drawTextMarker(y,M,O.className,b):v.drawSingleLineMarker(y,M,O.className+" ace_br15",b)}}}},T}();E.prototype.MAX_MARKERS=1e4,C.MarkerGroup=E}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(f,C,F){var E=f("../range").Range,T=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function y(g,b){var $=g.getTextRange(E.fromPoints({row:0,column:0},b));return $.split(T).length-1}function v(g,b){var $=y(g,b),x=g.getValue().split(T),L=Object.create(null),N=x[$];return x.forEach(function(_,k){if(!(!_||_===N)){var O=Math.abs($-k),P=x.length-O;L[_]?L[_]=Math.max(P,L[_]):L[_]=P}}),L}C.getCompletions=function(g,b,$,x,L){var N=v(b,$),_=Object.keys(N);L(null,_.map(function(k){return{caption:k,value:k,score:N[k],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/marker_group","ace/autocomplete/text_completer","ace/editor","ace/config"],function(f,C,F){var E=f("../snippets").snippetManager,T=f("../autocomplete").Autocomplete,y=f("../config"),v=f("../lib/lang"),g=f("../autocomplete/util"),b=f("../marker_group").MarkerGroup,$=f("../autocomplete/text_completer"),x={getCompletions:function(t,o,l,c,s){if(o.$mode.completer)return o.$mode.completer.getCompletions(t,o,l,c,s);var p=t.session.getState(l.row),a=o.$mode.getCompletions(p,o,l,c);a=a.map(function(h){return h.completerId=x.id,h}),s(null,a)},id:"keywordCompleter"},L=function(t){var o={};return t.replace(/\${(\d+)(:(.*?))?}/g,function(l,c,s,p){return o[c]=p||""}).replace(/\$(\d+?)/g,function(l,c){return o[c]})},N={getCompletions:function(t,o,l,c,s){var p=[],a=o.getTokenAt(l.row,l.column);a&&a.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?p.push("html-tag"):p=E.getActiveScopes(t);var h=E.snippetMap,m=[];p.forEach(function(d){for(var w=h[d]||[],S=w.length;S--;){var R=w[S],I=R.name||R.tabTrigger;I&&m.push({caption:I,snippet:R.content,meta:R.tabTrigger&&!R.name?R.tabTrigger+"⇥ ":"snippet",completerId:N.id})}},this),s(null,m)},getDocTooltip:function(t){t.snippet&&!t.docHTML&&(t.docHTML=["<b>",v.escapeHTML(t.caption),"</b>","<hr></hr>",v.escapeHTML(L(t.snippet))].join(""))},id:"snippetCompleter"},_=[N,$,x];C.setCompleters=function(t){_.length=0,t&&_.push.apply(_,t)},C.addCompleter=function(t){_.push(t)},C.textCompleter=$,C.keyWordCompleter=x,C.snippetCompleter=N;var k={name:"expandSnippet",exec:function(t){return E.expandWithTab(t)},bindKey:"Tab"},O=function(t,o){P(o.session.$mode)},P=function(t){typeof t=="string"&&(t=y.$modes[t]),t&&(E.files||(E.files={}),M(t.$id,t.snippetFileId),t.modes&&t.modes.forEach(P))},M=function(t,o){!o||!t||E.files[t]||(E.files[t]={},y.loadModule(o,function(l){l&&(E.files[t]=l,!l.snippets&&l.snippetText&&(l.snippets=E.parseSnippetFile(l.snippetText)),E.register(l.snippets||[],l.scope),l.includeScopes&&(E.snippetMap[l.scope].includeScopes=l.includeScopes,l.includeScopes.forEach(function(c){P("ace/mode/"+c)})))}))},u=function(t){var o=t.editor,l=o.completer&&o.completer.activated;if(t.command.name==="backspace")l&&!g.getCompletionPrefix(o)&&o.completer.detach();else if(t.command.name==="insertstring"&&!l){r=t;var c=t.editor.$liveAutocompletionDelay;c?e.delay(c):i(t)}},r,e=v.delayedCall(function(){i(r)},0),i=function(t){var o=t.editor,l=g.getCompletionPrefix(o),c=t.args,s=g.triggerAutocomplete(o,c);if(l&&l.length>=o.$liveAutocompletionThreshold||s){var p=T.for(o);p.autoShown=!0,p.showPopup(o)}},n=f("../editor").Editor;f("../config").defineOptions(n.prototype,"editor",{enableBasicAutocompletion:{set:function(t){t?(T.for(this),this.completers||(this.completers=Array.isArray(t)?t:_),this.commands.addCommand(T.startCommand)):this.commands.removeCommand(T.startCommand)},value:!1},enableLiveAutocompletion:{set:function(t){t?(this.completers||(this.completers=Array.isArray(t)?t:_),this.commands.on("afterExec",u)):this.commands.off("afterExec",u)},value:!1},liveAutocompletionDelay:{initialValue:0},liveAutocompletionThreshold:{initialValue:0},enableSnippets:{set:function(t){t?(this.commands.addCommand(k),this.on("changeMode",O),O(null,this)):(this.commands.removeCommand(k),this.off("changeMode",O))},value:!1}}),C.MarkerGroup=b}),ace.define("ace/ext/inline_autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/inline","ace/autocomplete","ace/autocomplete","ace/editor","ace/autocomplete/util","ace/lib/dom","ace/lib/lang","ace/ext/command_bar","ace/ext/command_bar","ace/ext/language_tools","ace/ext/language_tools","ace/ext/language_tools","ace/config"],function(f,C,F){var E=f("../keyboard/hash_handler").HashHandler,T=f("../autocomplete/inline").AceInline,y=f("../autocomplete").FilteredList,v=f("../autocomplete").CompletionProvider,g=f("../editor").Editor,b=f("../autocomplete/util"),$=f("../lib/dom"),x=f("../lib/lang"),L=f("./command_bar").CommandBarTooltip,N=f("./command_bar").BUTTON_CLASS_NAME,_=f("./language_tools").snippetCompleter,k=f("./language_tools").textCompleter,O=f("./language_tools").keyWordCompleter,P=function(r,e){e.completer&&e.completer.destroy()},M=function(){function r(e){this.editor=e,this.keyboardHandler=new E(this.commands),this.$index=-1,this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.changeTimer=x.delayedCall(function(){this.updateCompletions()}.bind(this))}return r.prototype.getInlineRenderer=function(){return this.inlineRenderer||(this.inlineRenderer=new T),this.inlineRenderer},r.prototype.getInlineTooltip=function(){return this.inlineTooltip||(this.inlineTooltip=r.createInlineTooltip(document.body||document.documentElement)),this.inlineTooltip},r.prototype.show=function(e){this.activated=!0,this.editor.completer!==this&&(this.editor.completer&&this.editor.completer.detach(),this.editor.completer=this),this.editor.on("changeSelection",this.changeListener),this.editor.on("blur",this.blurListener),this.updateCompletions(e)},r.prototype.$open=function(){this.editor.textInput.setAriaOptions&&this.editor.textInput.setAriaOptions({}),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.getInlineTooltip().attach(this.editor),this.$index===-1?this.setIndex(0):this.$showCompletion(),this.changeTimer.cancel()},r.prototype.insertMatch=function(){var e=this.getCompletionProvider().insertByIndex(this.editor,this.$index);return this.detach(),e},r.prototype.changeListener=function(e){var i=this.editor.selection.lead;(i.row!=this.base.row||i.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},r.prototype.blurListener=function(e){this.detach()},r.prototype.goTo=function(e){if(!(!this.completions||!this.completions.filtered)){var i=this.completions.filtered.length;switch(e.toLowerCase()){case"prev":this.setIndex((this.$index-1+i)%i);break;case"next":this.setIndex((this.$index+1+i)%i);break;case"first":this.setIndex(0);break;case"last":this.setIndex(this.completions.filtered.length-1);break}}},r.prototype.getLength=function(){return!this.completions||!this.completions.filtered?0:this.completions.filtered.length},r.prototype.getData=function(e){return e==null||e===null?this.completions.filtered[this.$index]:this.completions.filtered[e]},r.prototype.getIndex=function(){return this.$index},r.prototype.isOpen=function(){return this.$index>=0},r.prototype.setIndex=function(e){if(!(!this.completions||!this.completions.filtered)){var i=Math.max(-1,Math.min(this.completions.filtered.length-1,e));i!==this.$index&&(this.$index=i,this.$showCompletion())}},r.prototype.getCompletionProvider=function(e){return this.completionProvider||(this.completionProvider=new v(e)),this.completionProvider},r.prototype.$showCompletion=function(){this.getInlineRenderer().show(this.editor,this.completions.filtered[this.$index],this.completions.filterText)||this.getInlineRenderer().hide(),this.inlineTooltip&&this.inlineTooltip.isShown()&&this.inlineTooltip.update()},r.prototype.$updatePrefix=function(){var e=this.editor.getCursorPosition(),i=this.editor.session.getTextRange({start:this.base,end:e});return this.completions.setFilter(i),this.completions.filtered.length?this.completions.filtered.length==1&&this.completions.filtered[0].value==i&&!this.completions.filtered[0].snippet?this.detach():(this.$open(this.editor,i),i):this.detach()},r.prototype.updateCompletions=function(o){var t="";if(o&&o.matches){var n=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(n.row,n.column),this.base.$insertRight=!0,this.completions=new y(o.matches),this.$open(this.editor,"")}this.base&&this.completions&&(t=this.$updatePrefix());var i=this.editor.getSession(),n=this.editor.getCursorPosition(),t=b.getCompletionPrefix(this.editor);this.base=i.doc.createAnchor(n.row,n.column-t.length),this.base.$insertRight=!0;var o={exactMatch:!0,ignoreCaption:!0};this.getCompletionProvider({prefix:t,base:this.base,pos:n}).provideCompletions(this.editor,o,function(l,c,s){var p=c.filtered,a=b.getCompletionPrefix(this.editor);if(s){if(!p.length)return this.detach();if(p.length==1&&p[0].value==a&&!p[0].snippet)return this.detach()}this.completions=c,this.$open(this.editor,a)}.bind(this))},r.prototype.detach=function(){this.editor&&(this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener)),this.changeTimer.cancel(),this.inlineTooltip&&this.inlineTooltip.detach(),this.setIndex(-1),this.completionProvider&&this.completionProvider.detach(),this.inlineRenderer&&this.inlineRenderer.isOpen()&&this.inlineRenderer.hide(),this.base&&this.base.detach(),this.activated=!1,this.completionProvider=this.completions=this.base=null},r.prototype.destroy=function(){this.detach(),this.inlineRenderer&&this.inlineRenderer.destroy(),this.inlineTooltip&&this.inlineTooltip.destroy(),this.editor&&this.editor.completer==this&&(this.editor.off("destroy",P),this.editor.completer=null),this.inlineTooltip=this.editor=this.inlineRenderer=null},r.prototype.updateDocTooltip=function(){},r}();M.prototype.commands={Previous:{bindKey:"Alt-[",name:"Previous",exec:function(r){r.completer.goTo("prev")}},Next:{bindKey:"Alt-]",name:"Next",exec:function(r){r.completer.goTo("next")}},Accept:{bindKey:{win:"Tab|Ctrl-Right",mac:"Tab|Cmd-Right"},name:"Accept",exec:function(r){return r.completer.insertMatch()}},Close:{bindKey:"Esc",name:"Close",exec:function(r){r.completer.detach()}}},M.for=function(r){return r.completer instanceof M||(r.completer&&(r.completer.destroy(),r.completer=null),r.completer=new M(r),r.once("destroy",P)),r.completer},M.startCommand={name:"startInlineAutocomplete",exec:function(r,e){var i=M.for(r);i.show(e)},bindKey:{win:"Alt-C",mac:"Option-C"}};var u=[_,k,O];f("../config").defineOptions(g.prototype,"editor",{enableInlineAutocompletion:{set:function(r){r?(this.completers||(this.completers=Array.isArray(r)?r:u),this.commands.addCommand(M.startCommand)):this.commands.removeCommand(M.startCommand)},value:!1}}),M.createInlineTooltip=function(r){var e=new L(r);return e.registerCommand("Previous",Object.assign({},M.prototype.commands.Previous,{enabled:!0,type:"button",iconCssClass:"ace_arrow_rotated"})),e.registerCommand("Position",{enabled:!1,getValue:function(i){return i?[i.completer.getIndex()+1,i.completer.getLength()].join("/"):""},type:"text",cssClass:"completion_position"}),e.registerCommand("Next",Object.assign({},M.prototype.commands.Next,{enabled:!0,type:"button",iconCssClass:"ace_arrow"})),e.registerCommand("Accept",Object.assign({},M.prototype.commands.Accept,{enabled:function(i){return!!i&&i.completer.getIndex()>=0},type:"button"})),e.registerCommand("ShowTooltip",{name:"Always Show Tooltip",exec:function(){e.setAlwaysShow(!e.getAlwaysShow())},enabled:!0,getValue:function(){return e.getAlwaysShow()},type:"checkbox"}),e},$.importCssString(`

.ace_icon_svg.ace_arrow,
.ace_icon_svg.ace_arrow_rotated {
    -webkit-mask-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODM3MDEgMTVMNC41ODc1MSAxMy43MTU1TDEwLjE0NjggOEw0LjU4NzUxIDIuMjg0NDZMNS44MzcwMSAxTDEyLjY0NjUgOEw1LjgzNzAxIDE1WiIgZmlsbD0iYmxhY2siLz48L3N2Zz4=");
}

.ace_icon_svg.ace_arrow_rotated {
    transform: rotate(180deg);
}

div.`.concat(N,`.completion_position {
    padding: 0;
}
`),"inlineautocomplete.css",!1),C.InlineAutocomplete=M}),function(){ace.require(["ace/ext/inline_autocomplete"],function(f){V&&(V.exports=f)})}()})(Z);var X=Z.exports;const ee=Q(X),ie=q({__proto__:null,default:ee},[X]);export{ie as e};
