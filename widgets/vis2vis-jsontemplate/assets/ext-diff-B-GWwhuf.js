import{a as Gt}from"./_commonjsHelpers-DsqdWQfm.js";function zt(Ue,rt){for(var k=0;k<rt.length;k++){const X=rt[k];if(typeof X!="string"&&!Array.isArray(X)){for(const Ee in X)if(Ee!=="default"&&!(Ee in Ue)){const Z=Object.getOwnPropertyDescriptor(X,Ee);Z&&Object.defineProperty(Ue,Ee,Z.get?Z:{enumerable:!0,get:()=>X[Ee]})}}}return Object.freeze(Object.defineProperty(Ue,Symbol.toStringTag,{value:"Module"}))}var Lt={exports:{}};(function(Ue,rt){ace.define("ace/ext/diff/scroll_diff_decorator",["require","exports","module","ace/layer/decorators"],function(k,X,Ee){var Z=this&&this.__extends||function(){var _=function(L,u){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(f[w]=p[w])},_(L,u)};return function(L,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");_(L,u);function f(){this.constructor=L}L.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),G=this&&this.__values||function(_){var L=typeof Symbol=="function"&&Symbol.iterator,u=L&&_[L],f=0;if(u)return u.call(_);if(_&&typeof _.length=="number")return{next:function(){return _&&f>=_.length&&(_=void 0),{value:_&&_[f++],done:!_}}};throw new TypeError(L?"Object is not iterable.":"Symbol.iterator is not defined.")},I=k("../../layer/decorators").Decorator,U=function(_){Z(L,_);function L(u,f,p){var w=_.call(this,u,f)||this;return w.colors.dark.delete="rgba(255, 18, 18, 1)",w.colors.dark.insert="rgba(18, 136, 18, 1)",w.colors.light.delete="rgb(255,51,51)",w.colors.light.insert="rgb(32,133,72)",w.$zones=[],w.$forInlineDiff=p,w}return L.prototype.addZone=function(u,f,p){this.$zones.push({startRow:u,endRow:f,type:p})},L.prototype.setSessions=function(u,f){this.sessionA=u,this.sessionB=f},L.prototype.$updateDecorators=function(u){if(typeof this.canvas.getContext=="function"&&(_.prototype.$updateDecorators.call(this,u),this.$zones.length>0)){var f=this.renderer.theme.isDark===!0?this.colors.dark:this.colors.light,p=this.canvas.getContext("2d");this.$setDiffDecorators(p,f)}},L.prototype.$transformPosition=function(u,f){return f=="delete"?this.sessionA.documentToScreenRow(u,0):this.sessionB.documentToScreenRow(u,0)},L.prototype.$setDiffDecorators=function(u,f){var p,w,O=this;function D(v,g){return v.from===g.from?v.to-g.to:v.from-g.from}var S=this.$zones;if(S){var F=[],le=S.filter(function(v){return v.type==="delete"}),re=S.filter(function(v){return v.type==="insert"});[le,re].forEach(function(v){v.forEach(function(g,B){var N=O.$transformPosition(g.startRow,g.type)*O.lineHeight,ee=O.$transformPosition(g.endRow,g.type)*O.lineHeight+O.lineHeight,J=Math.round(O.heightRatio*N),te=Math.round(O.heightRatio*ee),$=1,ne=Math.round((J+te)/2),Q=te-ne;Q<O.halfMinDecorationHeight&&(Q=O.halfMinDecorationHeight);var be=F[F.length-1];B>0&&be&&be.type===g.type&&ne-Q<be.to+$&&(ne=F[F.length-1].to+$+Q),ne-Q<0&&(ne=Q),ne+Q>O.canvasHeight&&(ne=O.canvasHeight-Q),F.push({type:g.type,from:ne-Q,to:ne+Q,color:f[g.type]||null})})}),F=F.sort(D);try{for(var fe=G(F),K=fe.next();!K.done;K=fe.next()){var me=K.value;u.fillStyle=me.color||null;var y=me.from,a=me.to,l=a-y;this.$forInlineDiff?u.fillRect(this.oneZoneWidth,y,2*this.oneZoneWidth,l):me.type=="delete"?u.fillRect(this.oneZoneWidth,y,this.oneZoneWidth,l):u.fillRect(2*this.oneZoneWidth,y,this.oneZoneWidth,l)}}catch(v){p={error:v}}finally{try{K&&!K.done&&(w=fe.return)&&w.call(fe)}finally{if(p)throw p.error}}}},L.prototype.setZoneWidth=function(){this.oneZoneWidth=Math.round(this.canvasWidth/3)},L}(I);X.ScrollDiffDecorator=U}),ace.define("ace/ext/diff/styles-css.js",["require","exports","module"],function(k,X,Ee){X.cssText=`
/*
 * Line Markers
 */
.ace_diff {
    position: absolute;
    z-index: 0;
}
.ace_diff.inline {
    z-index: 20;
}
/*
 * Light Colors 
 */
.ace_diff.insert {
    background-color: #EFFFF1;
}
.ace_diff.delete {
    background-color: #FFF1F1;
}
.ace_diff.aligned_diff {
    background: rgba(206, 194, 191, 0.26);
    background: repeating-linear-gradient(
                45deg,
              rgba(122, 111, 108, 0.26),
              rgba(122, 111, 108, 0.26) 5px,
              rgba(0, 0, 0, 0) 5px,
              rgba(0, 0, 0, 0) 10px 
    );
}

.ace_diff.insert.inline {
    background-color:  rgb(74 251 74 / 18%); 
}
.ace_diff.delete.inline {
    background-color: rgb(251 74 74 / 15%);
}

.ace_diff.delete.inline.empty {
    background-color: rgba(255, 128, 79, 0.7);
    width: 2px !important;
}

.ace_diff.insert.inline.empty {
    background-color: rgba(49, 230, 96, 0.7);
    width: 2px !important;
}

.ace_diff-active-line {
    border-bottom: 1px solid;
    border-top: 1px solid;
    background: transparent;
    position: absolute;
    box-sizing: border-box;
    border-color: #9191ac;
}

.ace_dark .ace_diff-active-line {
    background: transparent;
    border-color: #75777a;
}
 

/* gutter changes */
.ace_mini-diff_gutter-enabled > .ace_gutter-cell,
.ace_mini-diff_gutter-enabled > .ace_gutter-cell_svg-icons {
    padding-right: 13px;
}

.ace_mini-diff_gutter_other > .ace_gutter-cell,
.ace_mini-diff_gutter_other > .ace_gutter-cell_svg-icons  {
    display: none;
}

.ace_mini-diff_gutter_other {
    pointer-events: none;
}


.ace_mini-diff_gutter-enabled > .mini-diff-added {
    background-color: #EFFFF1;
    border-left: 3px solid #2BB534;
    padding-left: 16px;
    display: block;
}

.ace_mini-diff_gutter-enabled > .mini-diff-deleted {
    background-color: #FFF1F1;
    border-left: 3px solid #EA7158;
    padding-left: 16px;
    display: block;
}


.ace_mini-diff_gutter-enabled > .mini-diff-added:after {
    position: absolute;
    right: 2px;
    content: "+";
    color: darkgray;
    background-color: inherit;
}

.ace_mini-diff_gutter-enabled > .mini-diff-deleted:after {
    position: absolute;
    right: 2px;
    content: "-";
    color: darkgray;
    background-color: inherit;
}
.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-added:after,
.ace_fade-fold-widgets:hover > .ace_folding-enabled > .mini-diff-deleted:after {
    display: none;
}

.ace_diff_other .ace_selection {
    filter: drop-shadow(1px 2px 3px darkgray);
}

.ace_hidden_marker-layer .ace_bracket {
    display: none;
}



/*
 * Dark Colors 
 */

.ace_dark .ace_diff.insert {
    background-color: #212E25;
}
.ace_dark .ace_diff.delete {
    background-color: #3F2222;
}

.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-added {
    background-color: #212E25;
    border-left-color:#00802F;
}

.ace_dark .ace_mini-diff_gutter-enabled > .mini-diff-deleted {
    background-color: #3F2222;
    border-left-color: #9C3838;
}

`}),ace.define("ace/ext/diff/gutter_decorator",["require","exports","module","ace/lib/dom"],function(k,X,Ee){var Z=k("../../lib/dom"),G=function(){function I(U,_){this.gutterClass="ace_mini-diff_gutter-enabled",this.gutterCellsClasses={add:"mini-diff-added",delete:"mini-diff-deleted"},this.editor=U,this.type=_,this.chunks=[],this.attachToEditor()}return I.prototype.attachToEditor=function(){this.renderGutters=this.renderGutters.bind(this),Z.addCssClass(this.editor.renderer.$gutterLayer.element,this.gutterClass),this.editor.renderer.$gutterLayer.on("afterRender",this.renderGutters)},I.prototype.renderGutters=function(U,_){var L=this,u=this.editor.renderer.$gutterLayer.$lines.cells;u.forEach(function(w){w.element.classList.remove(Object.values(L.gutterCellsClasses))});var f=this.type===-1?"old":"new",p=this.type===-1?this.gutterCellsClasses.delete:this.gutterCellsClasses.add;this.chunks.forEach(function(w){var O=w[f].start.row,D=w[f].end.row-1;u.forEach(function(S){S.row>=O&&S.row<=D&&S.element.classList.add(p)})})},I.prototype.setDecorations=function(U){this.chunks=U,this.renderGutters()},I.prototype.dispose=function(){Z.removeCssClass(this.editor.renderer.$gutterLayer.element,this.gutterClass),this.editor.renderer.$gutterLayer.off("afterRender",this.renderGutters)},I}();X.MinimalGutterDiffDecorator=G}),ace.define("ace/ext/diff/base_diff_view",["require","exports","module","ace/lib/oop","ace/range","ace/lib/dom","ace/config","ace/line_widgets","ace/ext/diff/scroll_diff_decorator","ace/ext/diff/styles-css.js","ace/editor","ace/virtual_renderer","ace/undomanager","ace/layer/decorators","ace/theme/textmate","ace/multi_select","ace/edit_session","ace/ext/diff/gutter_decorator"],function(k,X,Ee){var Z=this&&this.__read||function(y,a){var l=typeof Symbol=="function"&&y[Symbol.iterator];if(!l)return y;var v=l.call(y),g,B=[],N;try{for(;(a===void 0||a-- >0)&&!(g=v.next()).done;)B.push(g.value)}catch(ee){N={error:ee}}finally{try{g&&!g.done&&(l=v.return)&&l.call(v)}finally{if(N)throw N.error}}return B};k("../../lib/oop");var G=k("../../range").Range,I=k("../../lib/dom"),U=k("../../config"),_=k("../../line_widgets").LineWidgets,L=k("./scroll_diff_decorator").ScrollDiffDecorator,u=k("./styles-css.js").cssText,f=k("../../editor").Editor,p=k("../../virtual_renderer").VirtualRenderer,w=k("../../undomanager").UndoManager,O=k("../../layer/decorators").Decorator;k("../../theme/textmate"),k("../../multi_select");var D=k("../../edit_session").EditSession,S=k("./gutter_decorator").MinimalGutterDiffDecorator,F={compute:function(y,a,l){return[]}},le=function(){function y(a,l){this.onChangeTheme=this.onChangeTheme.bind(this),this.onInput=this.onInput.bind(this),this.onChangeFold=this.onChangeFold.bind(this),this.realign=this.realign.bind(this),this.onSelect=this.onSelect.bind(this),this.onChangeWrapLimit=this.onChangeWrapLimit.bind(this),this.realignPending=!1,this.diffSession,this.chunks,this.inlineDiffEditor=a||!1,this.currentDiffIndex=0,this.diffProvider=F,l&&(this.container=l),I.importCssString(u,"diffview.css"),this.$ignoreTrimWhitespace=!1,this.$maxDiffs=5e3,this.$maxComputationTimeMs=150,this.$syncSelections=!1,this.$foldUnchangedOnInput=!1,this.markerB=new K(this,1),this.markerA=new K(this,-1)}return y.prototype.$setupModels=function(a){a.diffProvider&&this.setProvider(a.diffProvider),this.showSideA=a.inline==null?!0:a.inline==="a";var l={scrollPastEnd:.5,highlightActiveLine:!1,highlightGutterLine:!1,animatedScroll:!0,customScrollbar:!0,vScrollBarAlwaysVisible:!0,fadeFoldWidgets:!0,showFoldWidgets:!0,selectionStyle:"text"};if(this.savedOptionsA=a.editorA&&a.editorA.getOptions(l),this.savedOptionsB=a.editorB&&a.editorB.getOptions(l),(!this.inlineDiffEditor||a.inline==="a")&&(this.editorA=a.editorA||this.$setupModel(a.sessionA,a.valueA),this.container&&this.container.appendChild(this.editorA.container),this.editorA.setOptions(l)),(!this.inlineDiffEditor||a.inline==="b")&&(this.editorB=a.editorB||this.$setupModel(a.sessionB,a.valueB),this.container&&this.container.appendChild(this.editorB.container),this.editorB.setOptions(l)),this.inlineDiffEditor){this.activeEditor=this.showSideA?this.editorA:this.editorB,this.otherSession=this.showSideA?this.sessionB:this.sessionA;var v=this.activeEditor.getOptions();v.readOnly=!0,delete v.mode,this.otherEditor=new f(new p(null),void 0,v),this.showSideA?this.editorB=this.otherEditor:this.editorA=this.otherEditor}this.setDiffSession({sessionA:a.sessionA||(a.editorA?a.editorA.session:new D(a.valueA||"")),sessionB:a.sessionB||(a.editorB?a.editorB.session:new D(a.valueB||"")),chunks:[]}),this.setupScrollbars()},y.prototype.addGutterDecorators=function(){this.gutterDecoratorA||(this.gutterDecoratorA=new S(this.editorA,-1)),this.gutterDecoratorB||(this.gutterDecoratorB=new S(this.editorB,1))},y.prototype.$setupModel=function(a,l){var v=new f(new p,a);return v.session.setUndoManager(new w),l!=null&&v.setValue(l,-1),v},y.prototype.foldUnchanged=function(){for(var a=this.chunks,l="-".repeat(120),v={old:new G(0,0,0,0),new:new G(0,0,0,0)},g=!1,B=0;B<a.length+1;B++){var N=a[B]||{old:new G(this.sessionA.getLength(),0,this.sessionA.getLength(),0),new:new G(this.sessionB.getLength(),0,this.sessionB.getLength(),0)},ee=N.new.start.row-v.new.end.row-5;if(ee>2){var J=v.old.end.row+2,te=this.sessionA.addFold(l,new G(J,0,J+ee,Number.MAX_VALUE));J=v.new.end.row+2;var $=this.sessionB.addFold(l,new G(J,0,J+ee,Number.MAX_VALUE));(te||$)&&(g=!0),$&&te&&(te.other=$,$.other=te)}v=N}return g},y.prototype.unfoldUnchanged=function(){for(var a=this.sessionA.getAllFolds(),l=a.length-1;l>=0;l--){var v=a[l];v.placeholder.length==120&&this.sessionA.removeFold(v)}},y.prototype.toggleFoldUnchanged=function(){this.foldUnchanged()||this.unfoldUnchanged()},y.prototype.setDiffSession=function(a){this.diffSession&&(this.$detachSessionsEventHandlers(),this.clearSelectionMarkers()),this.diffSession=a,this.sessionA=this.sessionB=null,this.diffSession&&(this.chunks=this.diffSession.chunks||[],this.editorA&&this.editorA.setSession(a.sessionA),this.editorB&&this.editorB.setSession(a.sessionB),this.sessionA=this.diffSession.sessionA,this.sessionB=this.diffSession.sessionB,this.$attachSessionsEventHandlers(),this.initSelectionMarkers()),this.otherSession=this.showSideA?this.sessionB:this.sessionA},y.prototype.$attachSessionsEventHandlers=function(){},y.prototype.$detachSessionsEventHandlers=function(){},y.prototype.getDiffSession=function(){return this.diffSession},y.prototype.setTheme=function(a){this.editorA&&this.editorA.setTheme(a),this.editorB&&this.editorB.setTheme(a)},y.prototype.getTheme=function(){return(this.editorA||this.editorB).getTheme()},y.prototype.onChangeTheme=function(a){var l=a&&a.theme||this.getTheme();this.editorA&&this.editorA.getTheme()!==l&&this.editorA.setTheme(l),this.editorB&&this.editorB.getTheme()!==l&&this.editorB.setTheme(l)},y.prototype.resize=function(a){this.editorA&&this.editorA.resize(a),this.editorB&&this.editorB.resize(a)},y.prototype.scheduleOnInput=function(){var a=this;this.$onInputTimer||(this.$onInputTimer=setTimeout(function(){a.$onInputTimer=null,a.onInput()}))},y.prototype.onInput=function(){var a=this;this.$onInputTimer&&clearTimeout(this.$onInputTimer);var l=this.sessionA.doc.getAllLines(),v=this.sessionB.doc.getAllLines();this.selectionRangeA=null,this.selectionRangeB=null;var g=this.$diffLines(l,v);this.diffSession.chunks=this.chunks=g,this.gutterDecoratorA&&this.gutterDecoratorA.setDecorations(g),this.gutterDecoratorB&&this.gutterDecoratorB.setDecorations(g),!(this.chunks&&this.chunks.length>this.$maxDiffs)&&(this.align(),this.editorA&&this.editorA.renderer.updateBackMarkers(),this.editorB&&this.editorB.renderer.updateBackMarkers(),setTimeout(function(){a.updateScrollBarDecorators()},0),this.$foldUnchangedOnInput&&this.foldUnchanged())},y.prototype.setupScrollbars=function(){var a=this,l=function(v){setTimeout(function(){a.$setScrollBarDecorators(v),a.updateScrollBarDecorators()},0)};this.inlineDiffEditor?l(this.activeEditor.renderer):(l(this.editorA.renderer),l(this.editorB.renderer))},y.prototype.$setScrollBarDecorators=function(a){a.$scrollDecorator&&a.$scrollDecorator.destroy(),a.$scrollDecorator=new L(a.scrollBarV,a,this.inlineDiffEditor),a.$scrollDecorator.setSessions(this.sessionA,this.sessionB),a.scrollBarV.setVisible(!0),a.scrollBarV.element.style.bottom=a.scrollBarH.getHeight()+"px"},y.prototype.$resetDecorators=function(a){a.$scrollDecorator&&a.$scrollDecorator.destroy(),a.$scrollDecorator=new O(a.scrollBarV,a)},y.prototype.updateScrollBarDecorators=function(){var a=this;if(this.inlineDiffEditor){if(!this.activeEditor)return;this.activeEditor.renderer.$scrollDecorator.$zones=[]}else{if(!this.editorA||!this.editorB)return;this.editorA.renderer.$scrollDecorator.$zones=[],this.editorB.renderer.$scrollDecorator.$zones=[]}var l=function(v,g){v&&typeof v.renderer.$scrollDecorator.addZone=="function"&&(g.old.start.row!=g.old.end.row&&v.renderer.$scrollDecorator.addZone(g.old.start.row,g.old.end.row-1,"delete"),g.new.start.row!=g.new.end.row&&v.renderer.$scrollDecorator.addZone(g.new.start.row,g.new.end.row-1,"insert"))};this.inlineDiffEditor?(this.chunks&&this.chunks.forEach(function(v){l(a.activeEditor,v)}),this.activeEditor.renderer.$scrollDecorator.$updateDecorators(this.activeEditor.renderer.layerConfig)):(this.chunks&&this.chunks.forEach(function(v){l(a.editorA,v),l(a.editorB,v)}),this.editorA.renderer.$scrollDecorator.$updateDecorators(this.editorA.renderer.layerConfig),this.editorB.renderer.$scrollDecorator.$updateDecorators(this.editorB.renderer.layerConfig))},y.prototype.$diffLines=function(a,l){return this.diffProvider.compute(a,l,{ignoreTrimWhitespace:this.$ignoreTrimWhitespace,maxComputationTimeMs:this.$maxComputationTimeMs})},y.prototype.setProvider=function(a){this.diffProvider=a},y.prototype.$addWidget=function(a,l){var v=a.lineWidgets[l.row];v&&(l.rowsAbove+=v.rowsAbove>l.rowsAbove?v.rowsAbove:l.rowsAbove,l.rowCount+=v.rowCount),a.lineWidgets[l.row]=l,a.widgetManager.lineWidgets[l.row]=l,a.$resetRowCache(l.row);var g=a.getFoldAt(l.row,0);g&&a.widgetManager.updateOnFold({data:g,action:"add"},a)},y.prototype.$initWidgets=function(a){var l=a.session;l.widgetManager||(l.widgetManager=new _(l),l.widgetManager.attach(a)),a.session.lineWidgets=[],a.session.widgetManager.lineWidgets=[],a.session.$resetRowCache(0)},y.prototype.$screenRow=function(a,l){var v=l.documentToScreenPosition(a).row,g=a.row-l.getLength()+1;return g>0&&(v+=g),v},y.prototype.align=function(){},y.prototype.onChangeWrapLimit=function(a,l){},y.prototype.onSelect=function(a,l){this.searchHighlight(l),this.syncSelect(l)},y.prototype.syncSelect=function(a){if(!this.$updatingSelection){var l=a.session===this.sessionA,v=a.getRange(),g=l?this.selectionRangeA:this.selectionRangeB;if(!(g&&v.isEqual(g))){l?this.selectionRangeA=v:this.selectionRangeB=v,this.$updatingSelection=!0;var B=this.transformRange(v,l);this.$syncSelections&&(l?this.editorB:this.editorA).session.selection.setSelectionRange(B),this.$updatingSelection=!1,l?(this.selectionRangeA=v,this.selectionRangeB=B):(this.selectionRangeA=B,this.selectionRangeB=v),this.updateSelectionMarker(this.syncSelectionMarkerA,this.sessionA,this.selectionRangeA),this.updateSelectionMarker(this.syncSelectionMarkerB,this.sessionB,this.selectionRangeB)}}},y.prototype.updateSelectionMarker=function(a,l,v){a.setRange(v),l._signal("changeFrontMarker")},y.prototype.onChangeFold=function(a,l){var v=a.data;if(!(this.$syncingFold||!v||!a.action)){this.scheduleRealign();var g=l===this.sessionA,B=g?this.sessionB:this.sessionA;if(a.action==="remove"&&(v.other?(v.other.other=null,B.removeFold(v.other)):v.lineWidget&&(B.widgetManager.addLineWidget(v.lineWidget),v.lineWidget=null,B.$editor&&B.$editor.renderer.updateBackMarkers())),a.action==="add"){var N=this.transformRange(v.range,g);if(N.isEmpty()){var ee=N.start.row+1;B.lineWidgets[ee]&&(v.lineWidget=B.lineWidgets[ee],B.widgetManager.removeLineWidget(v.lineWidget),B.$editor&&B.$editor.renderer.updateBackMarkers())}else this.$syncingFold=!0,v.other=B.addFold(v.placeholder,N),v.other&&(v.other.other=v),this.$syncingFold=!1}}},y.prototype.scheduleRealign=function(){this.realignPending||(this.realignPending=!0,this.editorA.renderer.on("beforeRender",this.realign),this.editorB.renderer.on("beforeRender",this.realign))},y.prototype.realign=function(){this.realignPending=!0,this.editorA.renderer.off("beforeRender",this.realign),this.editorB.renderer.off("beforeRender",this.realign),this.align(),this.realignPending=!1},y.prototype.detach=function(){!this.editorA||!this.editorB||(this.savedOptionsA&&this.editorA.setOptions(this.savedOptionsA),this.savedOptionsB&&this.editorB.setOptions(this.savedOptionsB),this.editorA.renderer.off("beforeRender",this.realign),this.editorB.renderer.off("beforeRender",this.realign),this.$detachEventHandlers(),this.$removeLineWidgets(this.sessionA),this.$removeLineWidgets(this.sessionB),this.gutterDecoratorA&&this.gutterDecoratorA.dispose(),this.gutterDecoratorB&&this.gutterDecoratorB.dispose(),this.sessionA.selection.clearSelection(),this.sessionB.selection.clearSelection(),this.savedOptionsA&&this.savedOptionsA.customScrollbar&&this.$resetDecorators(this.editorA.renderer),this.savedOptionsB&&this.savedOptionsB.customScrollbar&&this.$resetDecorators(this.editorB.renderer))},y.prototype.$removeLineWidgets=function(a){a.lineWidgets=[],a.widgetManager.lineWidgets=[],a._signal("changeFold",{data:{start:{row:0}}})},y.prototype.$detachEventHandlers=function(){},y.prototype.destroy=function(){this.detach(),this.editorA&&this.editorA.destroy(),this.editorB&&this.editorB.destroy(),this.editorA=this.editorB=null},y.prototype.gotoNext=function(a){var l=this.activeEditor||this.editorA;this.inlineDiffEditor&&(l=this.editorA);var v=l==this.editorA,g=l.selection.lead.row,B=this.findChunkIndex(this.chunks,g,v),N=this.chunks[B+a]||this.chunks[B],ee=l.session.getScrollTop();if(N){var J=N[v?"old":"new"],te=Math.max(J.start.row,J.end.row-1);l.selection.setRange(new G(te,0,te,0))}l.renderer.scrollSelectionIntoView(l.selection.lead,l.selection.anchor,.5),l.renderer.animateScrolling(ee)},y.prototype.firstDiffSelected=function(){return this.currentDiffIndex<=1},y.prototype.lastDiffSelected=function(){return this.currentDiffIndex>this.chunks.length-1},y.prototype.transformRange=function(a,l){return G.fromPoints(this.transformPosition(a.start,l),this.transformPosition(a.end,l))},y.prototype.transformPosition=function(a,l){var v=this.findChunkIndex(this.chunks,a.row,l),g=this.chunks[v],B=this.sessionB.doc.clonePos,N=B(a),ee=Z(l?["old","new"]:["new","old"],2),J=ee[0],te=ee[1],$=0,ne=!1;if(g)if(g[J].end.row<=a.row)N.row-=g[J].end.row-g[te].end.row;else if(g.charChanges)for(var Q=0;Q<g.charChanges.length;Q++){var be=g.charChanges[Q],ae=be[J],he=be[te];if(!(ae.end.row<a.row)){if(ae.start.row>a.row)break;if(ae.isMultiLine()&&ae.contains(a.row,a.column)){N.row=he.start.row+a.row-ae.start.row;var pe=he.end.row;he.end.column===0&&pe--,N.row>pe&&(N.row=pe,N.column=(l?this.sessionB:this.sessionA).getLine(pe).length,ne=!0),N.row=Math.min(N.row,pe)}else{if(N.row=he.start.row,ae.start.column>a.column)break;ne=!0,!ae.isEmpty()&&ae.contains(a.row,a.column)?(N.column=he.start.column,$=a.column-ae.start.column,$=Math.min($,he.end.column-he.start.column)):(N=B(he.end),$=a.column-ae.end.column)}}}else g[J].start.row<=a.row&&(N.row+=g[te].start.row-g[J].start.row,N.row>=g[te].end.row&&(N.row=g[te].end.row-1,N.column=(l?this.sessionB:this.sessionA).getLine(N.row).length));if(!ne){var Le=Z(l?[this.sessionA,this.sessionB]:[this.sessionB,this.sessionA],2),Ae=Le[0],Fe=Le[1];$-=this.$getDeltaIndent(Ae,Fe,a.row,N.row)}return N.column+=$,N},y.prototype.$getDeltaIndent=function(a,l,v,g){var B=this.$getIndent(a,v),N=this.$getIndent(l,g);return B-N},y.prototype.$getIndent=function(a,l){return a.getLine(l).match(/^\s*/)[0].length},y.prototype.printDiffs=function(){this.chunks.forEach(function(a){console.log(a.toString())})},y.prototype.findChunkIndex=function(a,l,v){for(var g=0;g<a.length;g++){var B=a[g],N=v?B.old:B.new;if(!(N.end.row<l)&&N.start.row>l)break}return this.currentDiffIndex=g,g-1},y.prototype.searchHighlight=function(a){if(!(this.$syncSelections||this.inlineDiffEditor)){var l=a.session,v=l===this.sessionA?this.sessionB:this.sessionA;v.highlight(l.$searchHighlight.regExp),v._signal("changeBackMarker")}},y.prototype.initSelectionMarkers=function(){this.syncSelectionMarkerA=new me,this.syncSelectionMarkerB=new me,this.sessionA.addDynamicMarker(this.syncSelectionMarkerA,!0),this.sessionB.addDynamicMarker(this.syncSelectionMarkerB,!0)},y.prototype.clearSelectionMarkers=function(){this.sessionA.removeMarker(this.syncSelectionMarkerA.id),this.sessionB.removeMarker(this.syncSelectionMarkerB.id)},y}();U.defineOptions(le.prototype,"DiffView",{showOtherLineNumbers:{set:function(y){this.gutterLayer&&(this.gutterLayer.$renderer=y?null:re,this.editorA.renderer.updateFull())},initialValue:!0},folding:{set:function(y){if(this.editorA.setOption("showFoldWidgets",y),this.editorB.setOption("showFoldWidgets",y),!y){var a=[],l=[];this.chunks&&this.chunks.forEach(function(v){a.push(v.old.start,v.old.end),l.push(v.new.start,v.new.end)}),this.sessionA.unfold(a),this.sessionB.unfold(l)}}},syncSelections:{set:function(y){}},ignoreTrimWhitespace:{set:function(y){this.scheduleOnInput()}},wrap:{set:function(y){this.sessionA.setOption("wrap",y),this.sessionB.setOption("wrap",y)}},maxDiffs:{value:5e3},theme:{set:function(y){this.setTheme(y)},get:function(){return this.editorA.getTheme()}}});var re={getText:function(a){return""},getWidth:function(){return 0}};X.BaseDiffView=le;var fe=function(){function y(a,l,v){this.old=a,this.new=l,this.charChanges=v&&v.map(function(g){return new y(new G(g.originalStartLineNumber,g.originalStartColumn,g.originalEndLineNumber,g.originalEndColumn),new G(g.modifiedStartLineNumber,g.modifiedStartColumn,g.modifiedEndLineNumber,g.modifiedEndColumn))})}return y}(),K=function(){function y(a,l){this.id,this.diffView=a,this.type=l}return y.prototype.update=function(a,l,v,g){var B,N,ee,J=this.diffView;this.type===-1?(B="old",N="delete",ee="insert"):(B="new",N="insert",ee="delete");var te=J.$ignoreTrimWhitespace,$=J.chunks;if(v.lineWidgets&&!J.inlineDiffEditor)for(var ne=g.firstRow;ne<=g.lastRow;ne++){var Q=v.lineWidgets[ne];if(!(!Q||Q.hidden)){var be=v.documentToScreenRow(ne,0);if(Q.rowsAbove>0){var he=new G(be-Q.rowsAbove,0,be-1,Number.MAX_VALUE);l.drawFullLineMarker(a,he,"ace_diff aligned_diff",g)}var ae=be+Q.rowCount-(Q.rowsAbove||0),he=new G(be+1,0,ae,Number.MAX_VALUE);l.drawFullLineMarker(a,he,"ace_diff aligned_diff",g)}}$.forEach(function(pe){var Le=pe[B].start.row,Ae=pe[B].end.row;if(!(Ae<g.firstRow||Le>g.lastRow)){var Fe=new G(Le,0,Ae-1,1<<30);if(Le!==Ae&&(Fe=Fe.toScreenRange(v),l.drawFullLineMarker(a,Fe,"ace_diff "+N,g)),pe.charChanges)for(var je=0;je<pe.charChanges.length;je++){var Y=pe.charChanges[je][B];if(Y.end.column==0&&Y.end.row>Y.start.row&&Y.end.row==pe[B].end.row&&(Y.end.row--,Y.end.column=Number.MAX_VALUE),te)for(var $e=Y.start.row;$e<=Y.end.row;$e++){var qe=void 0,ke=void 0,ue=v.getLine($e).match(/^\s*/)[0].length,De=v.getLine($e).length;$e===Y.start.row?qe=Y.start.column:qe=ue,$e===Y.end.row?ke=Y.end.column:ke=De;var He=new G($e,qe,$e,ke),Ve=He.toScreenRange(v);if(!(ue===qe&&De===ke)){var Me="inline "+N;He.isEmpty()&&qe!==0&&(Me="inline "+ee+" empty"),l.drawSingleLineMarker(a,Ve,"ace_diff "+Me,g)}}else{var Ke=new G(Y.start.row,Y.start.column,Y.end.row,Y.end.column),Ve=Ke.toScreenRange(v),Me="inline "+N;Ke.isEmpty()&&Y.start.column!==0&&(Me="inline empty "+ee),Ve.isMultiLine()?l.drawTextMarker(a,Ve,"ace_diff "+Me,g):l.drawSingleLineMarker(a,Ve,"ace_diff "+Me,g)}}}})},y}(),me=function(){function y(){this.id,this.type="fullLine",this.clazz="ace_diff-active-line"}return y.prototype.update=function(a,l,v,g){},y.prototype.setRange=function(a){var l=a.clone();l.end.column++,this.range=l},y}();X.DiffChunk=fe,X.DiffHighlight=K}),ace.define("ace/ext/diff/inline_diff_view",["require","exports","module","ace/ext/diff/base_diff_view","ace/virtual_renderer","ace/config"],function(k,X,Ee){var Z=this&&this.__extends||function(){var L=function(u,f){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,w){p.__proto__=w}||function(p,w){for(var O in w)Object.prototype.hasOwnProperty.call(w,O)&&(p[O]=w[O])},L(u,f)};return function(u,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");L(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}}(),G=k("./base_diff_view").BaseDiffView,I=k("../../virtual_renderer").VirtualRenderer,U=k("../../config"),_=function(L){Z(u,L);function u(f,p){var w=this;return f=f||{},f.inline=f.inline||"a",w=L.call(this,!0,p)||this,w.init(f),w}return u.prototype.init=function(f){this.onSelect=this.onSelect.bind(this),this.onAfterRender=this.onAfterRender.bind(this),this.$setupModels(f),this.onChangeTheme(),U.resetOptions(this),U._signal("diffView",this);var p=this.activeEditor.renderer.$padding;this.addGutterDecorators(),this.otherEditor.renderer.setPadding(p),this.textLayer=this.otherEditor.renderer.$textLayer,this.markerLayer=this.otherEditor.renderer.$markerBack,this.gutterLayer=this.otherEditor.renderer.$gutterLayer,this.cursorLayer=this.otherEditor.renderer.$cursorLayer,this.otherEditor.renderer.$updateCachedSize=function(){};var w=this.activeEditor.renderer.$textLayer.element;w.parentNode.insertBefore(this.textLayer.element,w);var O=this.activeEditor.renderer.$markerBack.element;O.parentNode.insertBefore(this.markerLayer.element,O.nextSibling);var D=this.activeEditor.renderer.$gutterLayer.element;D.parentNode.insertBefore(this.gutterLayer.element,D.nextSibling),D.style.position="absolute",this.gutterLayer.element.style.position="absolute",this.gutterLayer.element.style.width="100%",this.gutterLayer.element.classList.add("ace_mini-diff_gutter_other"),this.gutterLayer.$updateGutterWidth=function(){},this.initMouse(),this.initTextInput(),this.initTextLayer(),this.initRenderer(),this.$attachEventHandlers(),this.selectEditor(this.activeEditor)},u.prototype.initRenderer=function(f){var p=this;f?delete this.activeEditor.renderer.$getLongestLine:this.editorA.renderer.$getLongestLine=this.editorB.renderer.$getLongestLine=function(){var w=I.prototype.$getLongestLine;return Math.max(w.call(p.editorA.renderer),w.call(p.editorB.renderer))}},u.prototype.initTextLayer=function(){var f=this.textLayer.$renderLine,p=this;this.otherEditor.renderer.$textLayer.$renderLine=function(D,S,F){O(p.chunks,S)&&f.call(this,D,S,F)};var w=this.showSideA?"new":"old";function O(D,S){for(var F=0,le=D.length-1,re=-1;F<le;){var fe=Math.floor((F+le)/2),K=D[fe][w].start.row;if(K<S)re=fe,F=fe+1;else if(K>S)le=fe-1;else{re=fe;break}}D[re+1]&&D[re+1][w].start.row<=S&&re++;var me=D[re]&&D[re][w];return!!(me&&me.end.row>S)}},u.prototype.initTextInput=function(f){f?(this.otherEditor.textInput=this.othertextInput,this.otherEditor.container=this.otherEditorContainer):(this.othertextInput=this.otherEditor.textInput,this.otherEditor.textInput=this.activeEditor.textInput,this.otherEditorContainer=this.otherEditor.container,this.otherEditor.container=this.activeEditor.container)},u.prototype.selectEditor=function(f){f==this.activeEditor?(this.otherEditor.selection.clearSelection(),this.activeEditor.textInput.setHost(this.activeEditor),this.activeEditor.setStyle("ace_diff_other",!1),this.cursorLayer.element.remove(),this.activeEditor.renderer.$cursorLayer.element.style.display="block",this.showSideA&&(this.sessionA.removeMarker(this.syncSelectionMarkerA.id),this.sessionA.addDynamicMarker(this.syncSelectionMarkerA,!0)),this.markerLayer.element.classList.add("ace_hidden_marker-layer"),this.activeEditor.renderer.$markerBack.element.classList.remove("ace_hidden_marker-layer"),this.removeBracketHighlight(this.otherEditor)):(this.activeEditor.selection.clearSelection(),this.activeEditor.textInput.setHost(this.otherEditor),this.activeEditor.setStyle("ace_diff_other"),this.activeEditor.renderer.$cursorLayer.element.parentNode.appendChild(this.cursorLayer.element),this.activeEditor.renderer.$cursorLayer.element.style.display="none",this.activeEditor.$isFocused&&this.otherEditor.onFocus(),this.showSideA&&this.sessionA.removeMarker(this.syncSelectionMarkerA.id),this.markerLayer.element.classList.remove("ace_hidden_marker-layer"),this.activeEditor.renderer.$markerBack.element.classList.add("ace_hidden_marker-layer"),this.removeBracketHighlight(this.activeEditor))},u.prototype.removeBracketHighlight=function(f){var p=f.session;p.$bracketHighlight&&(p.$bracketHighlight.markerIds.forEach(function(w){p.removeMarker(w)}),p.$bracketHighlight=null)},u.prototype.initMouse=function(){var f=this;this.otherEditor.renderer.$loop=this.activeEditor.renderer.$loop,this.otherEditor.renderer.scroller={getBoundingClientRect:function(){return f.activeEditor.renderer.scroller.getBoundingClientRect()},style:this.activeEditor.renderer.scroller.style};var p=function(S){if(S.domEvent){var F=S.editor.renderer.pixelToScreenCoordinates(S.clientX,S.clientY),le=f.activeEditor.session,re=f.otherEditor.session,fe=le.screenToDocumentPosition(F.row,F.column,F.offsetX),K=re.screenToDocumentPosition(F.row,F.column,F.offsetX),me=le.documentToScreenPosition(fe),y=re.documentToScreenPosition(K);S.editor==f.activeEditor&&(y.row==F.row&&me.row!=F.row?(S.type=="mousedown"&&f.selectEditor(f.otherEditor),S.propagationStopped=!0,S.defaultPrevented=!0,f.otherEditor.$mouseHandler.onMouseEvent(S.type,S.domEvent)):S.type=="mousedown"&&f.selectEditor(f.activeEditor))}},w=["mousedown","click","mouseup","dblclick","tripleclick","quadclick"];w.forEach(function(S){f.activeEditor.on(S,p,!0),f.activeEditor.on("gutter"+S,p,!0)});var O=function(S){f.activeEditor.onFocus(S)},D=function(S){f.activeEditor.onBlur(S)};this.otherEditor.on("focus",O),this.otherEditor.on("blur",D),this.onMouseDetach=function(){w.forEach(function(S){f.activeEditor.off(S,p,!0),f.activeEditor.off("gutter"+S,p,!0)}),f.otherEditor.off("focus",O),f.otherEditor.off("blur",D)}},u.prototype.align=function(){var f=this;this.$initWidgets(f.editorA),this.$initWidgets(f.editorB),f.chunks.forEach(function(p){var w=f.$screenRow(p.old.end,f.sessionA)-f.$screenRow(p.old.start,f.sessionA),O=f.$screenRow(p.new.end,f.sessionB)-f.$screenRow(p.new.start,f.sessionB);f.$addWidget(f.sessionA,{rowCount:O,rowsAbove:p.old.end.row===0?O:0,row:p.old.end.row===0?0:p.old.end.row-1}),f.$addWidget(f.sessionB,{rowCount:w,rowsAbove:w,row:p.new.start.row})}),f.sessionA._emit("changeFold",{data:{start:{row:0}}}),f.sessionB._emit("changeFold",{data:{start:{row:0}}})},u.prototype.onChangeWrapLimit=function(){this.sessionB.adjustWrapLimit(this.sessionA.$wrapLimit),this.scheduleRealign()},u.prototype.$attachSessionsEventHandlers=function(){this.$attachSessionEventHandlers(this.editorA,this.markerA),this.$attachSessionEventHandlers(this.editorB,this.markerB),this.sessionA.on("changeWrapLimit",this.onChangeWrapLimit),this.sessionA.on("changeWrapMode",this.onChangeWrapLimit)},u.prototype.$attachSessionEventHandlers=function(f,p){f.session.on("changeFold",this.onChangeFold),f.session.addDynamicMarker(p),f.selection.on("changeCursor",this.onSelect),f.selection.on("changeSelection",this.onSelect)},u.prototype.$detachSessionsEventHandlers=function(){this.$detachSessionHandlers(this.editorA,this.markerA),this.$detachSessionHandlers(this.editorB,this.markerB),this.otherSession.bgTokenizer.lines.fill(void 0),this.sessionA.off("changeWrapLimit",this.onChangeWrapLimit),this.sessionA.off("changeWrapMode",this.onChangeWrapLimit)},u.prototype.$detachSessionHandlers=function(f,p){f.session.removeMarker(p.id),f.selection.off("changeCursor",this.onSelect),f.selection.off("changeSelection",this.onSelect),f.session.off("changeFold",this.onChangeFold)},u.prototype.$attachEventHandlers=function(){this.activeEditor.on("input",this.onInput),this.activeEditor.renderer.on("afterRender",this.onAfterRender),this.otherSession.on("change",this.onInput)},u.prototype.$detachEventHandlers=function(){this.$detachSessionsEventHandlers(),this.activeEditor.off("input",this.onInput),this.activeEditor.renderer.off("afterRender",this.onAfterRender),this.otherSession.off("change",this.onInput),this.textLayer.element.textContent="",this.textLayer.element.remove(),this.gutterLayer.element.textContent="",this.gutterLayer.element.remove(),this.markerLayer.element.textContent="",this.markerLayer.element.remove(),this.onMouseDetach(),this.selectEditor(this.activeEditor),this.clearSelectionMarkers(),this.otherEditor.setSession(null),this.otherEditor.renderer.$loop=null,this.initTextInput(!0),this.initRenderer(!0),this.otherEditor.destroy()},u.prototype.onAfterRender=function(f,p){var w=p.layerConfig,O=this.otherSession,D=this.otherEditor.renderer;O.$scrollTop=p.scrollTop,O.$scrollLeft=p.scrollLeft,["characterWidth","lineHeight","scrollTop","scrollLeft","scrollMargin","$padding","$size","layerConfig","$horizScroll","$vScroll"].forEach(function(F){D[F]=p[F]}),D.$computeLayerConfig();var S=D.layerConfig;this.gutterLayer.update(S),S.firstRowScreen=w.firstRowScreen,D.$cursorLayer.config=S,D.$cursorLayer.update(S),(f&D.CHANGE_LINES||f&D.CHANGE_FULL||f&D.CHANGE_SCROLL||f&D.CHANGE_TEXT)&&this.textLayer.update(S),this.markerLayer.setMarkers(this.otherSession.getMarkers()),this.markerLayer.update(S)},u.prototype.detach=function(){L.prototype.detach.call(this),this.otherEditor&&this.otherEditor.destroy()},u}(G);X.InlineDiffView=_}),ace.define("ace/ext/diff/split_diff_view",["require","exports","module","ace/ext/diff/base_diff_view","ace/config"],function(k,X,Ee){var Z=this&&this.__extends||function(){var _=function(L,u){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var w in p)Object.prototype.hasOwnProperty.call(p,w)&&(f[w]=p[w])},_(L,u)};return function(L,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");_(L,u);function f(){this.constructor=L}L.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}}(),G=k("./base_diff_view").BaseDiffView,I=k("../../config"),U=function(_){Z(L,_);function L(u){var f=this;return u=u||{},f=_.call(this)||this,f.init(u),f}return L.prototype.init=function(u){this.onChangeTheme=this.onChangeTheme.bind(this),this.onMouseWheel=this.onMouseWheel.bind(this),this.onScroll=this.onScroll.bind(this),this.$setupModels(u),this.addGutterDecorators(),this.onChangeTheme(),I.resetOptions(this),I._signal("diffView",this),this.$attachEventHandlers()},L.prototype.onChangeWrapLimit=function(){this.scheduleRealign()},L.prototype.align=function(){var u=this;this.$initWidgets(u.editorA),this.$initWidgets(u.editorB),u.chunks.forEach(function(f){var p=u.$screenRow(f.old.start,u.sessionA),w=u.$screenRow(f.new.start,u.sessionB);p<w?u.$addWidget(u.sessionA,{rowCount:w-p,rowsAbove:f.old.start.row===0?w-p:0,row:f.old.start.row===0?0:f.old.start.row-1}):p>w&&u.$addWidget(u.sessionB,{rowCount:p-w,rowsAbove:f.new.start.row===0?p-w:0,row:f.new.start.row===0?0:f.new.start.row-1});var p=u.$screenRow(f.old.end,u.sessionA),w=u.$screenRow(f.new.end,u.sessionB);p<w?u.$addWidget(u.sessionA,{rowCount:w-p,rowsAbove:f.old.end.row===0?w-p:0,row:f.old.end.row===0?0:f.old.end.row-1}):p>w&&u.$addWidget(u.sessionB,{rowCount:p-w,rowsAbove:f.new.end.row===0?p-w:0,row:f.new.end.row===0?0:f.new.end.row-1})}),u.sessionA._emit("changeFold",{data:{start:{row:0}}}),u.sessionB._emit("changeFold",{data:{start:{row:0}}})},L.prototype.onScroll=function(u,f){this.syncScroll(this.sessionA===f?this.editorA.renderer:this.editorB.renderer)},L.prototype.syncScroll=function(u){if(this.$syncScroll!=!1){var f=this.editorA.renderer,p=this.editorB.renderer,w=u==f;if(!(f.$scrollAnimation&&p.$scrollAnimation)){var O=Date.now();if(!(this.scrollSetBy!=u&&O-this.scrollSetAt<500)){var D=w?f:p;if(this.scrollSetBy!=u){if(w&&this.scrollA==D.session.getScrollTop())return;if(!w&&this.scrollB==D.session.getScrollTop())return}var S=w?p:f,F=D.session.getScrollTop();this.$syncScroll=!1,w?(this.scrollA=D.session.getScrollTop(),this.scrollB=F):(this.scrollA=F,this.scrollB=D.session.getScrollTop()),this.scrollSetBy=u,S.session.setScrollTop(F),this.$syncScroll=!0,this.scrollSetAt=O}}}},L.prototype.onMouseWheel=function(u){if(!u.getAccelKey()){u.getShiftKey()&&u.wheelY&&!u.wheelX&&(u.wheelX=u.wheelY,u.wheelY=0);var f=u.editor,p=f.renderer.isScrollableBy(u.wheelX*u.speed,u.wheelY*u.speed);if(!p){var w=f==this.editorA?this.editorB:this.editorA;return w.renderer.isScrollableBy(u.wheelX*u.speed,u.wheelY*u.speed)&&w.renderer.scrollBy(u.wheelX*u.speed,u.wheelY*u.speed),u.stop()}}},L.prototype.$attachSessionsEventHandlers=function(){this.$attachSessionEventHandlers(this.editorA,this.markerA),this.$attachSessionEventHandlers(this.editorB,this.markerB)},L.prototype.$attachSessionEventHandlers=function(u,f){u.session.on("changeScrollTop",this.onScroll),u.session.on("changeFold",this.onChangeFold),u.session.addDynamicMarker(f),u.selection.on("changeCursor",this.onSelect),u.selection.on("changeSelection",this.onSelect),u.session.on("changeWrapLimit",this.onChangeWrapLimit),u.session.on("changeWrapMode",this.onChangeWrapLimit)},L.prototype.$detachSessionsEventHandlers=function(){this.$detachSessionHandlers(this.editorA,this.markerA),this.$detachSessionHandlers(this.editorB,this.markerB)},L.prototype.$detachSessionHandlers=function(u,f){u.session.off("changeScrollTop",this.onScroll),u.session.off("changeFold",this.onChangeFold),u.session.removeMarker(f.id),u.selection.off("changeCursor",this.onSelect),u.selection.off("changeSelection",this.onSelect),u.session.off("changeWrapLimit",this.onChangeWrapLimit),u.session.off("changeWrapMode",this.onChangeWrapLimit)},L.prototype.$attachEventHandlers=function(){this.editorA.renderer.on("themeChange",this.onChangeTheme),this.editorB.renderer.on("themeChange",this.onChangeTheme),this.editorA.on("mousewheel",this.onMouseWheel),this.editorB.on("mousewheel",this.onMouseWheel),this.editorA.on("input",this.onInput),this.editorB.on("input",this.onInput)},L.prototype.$detachEventHandlers=function(){this.$detachSessionsEventHandlers(),this.clearSelectionMarkers(),this.editorA.renderer.off("themeChange",this.onChangeTheme),this.editorB.renderer.off("themeChange",this.onChangeTheme),this.$detachEditorEventHandlers(this.editorA),this.$detachEditorEventHandlers(this.editorB)},L.prototype.$detachEditorEventHandlers=function(u){u.off("mousewheel",this.onMouseWheel),u.off("input",this.onInput)},L}(G);X.SplitDiffView=U}),ace.define("ace/ext/diff/providers/default",["require","exports","module","ace/range","ace/ext/diff/base_diff_view"],function(k,X,Ee){var Z=this&&this.__extends||function(){var n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},n(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");n(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),G=this&&this.__generator||function(n,e){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=d(0),s.throw=d(1),s.return=d(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function d(h){return function(m){return c([h,m])}}function c(h){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,h[0]&&(t=0)),t;)try{if(r=1,i&&(o=h[0]&2?i.return:h[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,h[1])).done)return o;switch(i=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,i=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){t.label=h[1];break}if(h[0]===6&&t.label<o[1]){t.label=o[1],o=h;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(h);break}o[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(n,t)}catch(m){h=[6,m],i=0}finally{r=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},I=this&&this.__values||function(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},U,_,L,u,f,p;function w(n,e,t){if(t===void 0&&(t=function(o,s){return o===s}),n===e)return!0;if(!n||!e||n.length!==e.length)return!1;for(var r=0,i=n.length;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function O(n,e){var t,r,i,o,s,d,c,h;return G(this,function(m){switch(m.label){case 0:m.trys.push([0,8,9,10]),i=I(n),o=i.next(),m.label=1;case 1:return o.done?[3,7]:(s=o.value,r!==void 0&&e(r,s)?(t.push(s),[3,5]):[3,2]);case 2:return t?[4,t]:[3,4];case 3:m.sent(),m.label=4;case 4:t=[s],m.label=5;case 5:r=s,m.label=6;case 6:return o=i.next(),[3,1];case 7:return[3,10];case 8:return d=m.sent(),c={error:d},[3,10];case 9:try{o&&!o.done&&(h=i.return)&&h.call(i)}finally{if(c)throw c.error}return[7];case 10:return t?[4,t]:[3,12];case 11:m.sent(),m.label=12;case 12:return[2]}})}function D(n,e){for(var t=0;t<=n.length;t++)e(t===0?void 0:n[t-1],t===n.length?void 0:n[t])}function S(n,e){for(var t=0;t<n.length;t++)e(t===0?void 0:n[t-1],n[t],t+1===n.length?void 0:n[t+1])}function F(n,e){var t,r;try{for(var i=I(e),o=i.next();!o.done;o=i.next()){var s=o.value;n.push(s)}}catch(d){t={error:d}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}}function le(n,e){return function(t,r){return e(n(t),n(r))}}var re=function(n,e){return n-e};function fe(n){return function(e,t){return-n(e,t)}}var K=function(n){Z(e,n);function e(t){var r=n.call(this,t||"An unexpected bug occurred.")||this;return Object.setPrototypeOf(r,e.prototype),r}return e}(Error);function me(n,e){if(e===void 0&&(e="unexpected state"),!n)throw new K("Assertion Failed: ".concat(e))}function y(n){n()}function a(n,e){for(var t=0;t<n.length-1;){var r=n[t],i=n[t+1];if(!e(r,i))return!1;t++}return!0}var l=function(){function n(e,t){if(this.start=e,this.endExclusive=t,e>t)throw new K("Invalid range: ".concat(this.toString()))}return n.fromTo=function(e,t){return new n(e,t)},n.addRange=function(e,t){for(var r=0;r<t.length&&t[r].endExclusive<e.start;)r++;for(var i=r;i<t.length&&t[i].start<=e.endExclusive;)i++;if(r===i)t.splice(r,0,e);else{var o=Math.min(e.start,t[r].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(r,i-r,new n(o,s))}},n.tryCreate=function(e,t){if(!(e>t))return new n(e,t)},n.ofLength=function(e){return new n(0,e)},n.ofStartAndLength=function(e,t){return new n(e,e+t)},n.emptyAt=function(e){return new n(e,e)},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this.start===this.endExclusive},enumerable:!1,configurable:!0}),n.prototype.delta=function(e){return new n(this.start+e,this.endExclusive+e)},n.prototype.deltaStart=function(e){return new n(this.start+e,this.endExclusive)},n.prototype.deltaEnd=function(e){return new n(this.start,this.endExclusive+e)},Object.defineProperty(n.prototype,"length",{get:function(){return this.endExclusive-this.start},enumerable:!1,configurable:!0}),n.prototype.toString=function(){return"[".concat(this.start,", ").concat(this.endExclusive,")")},n.prototype.equals=function(e){return this.start===e.start&&this.endExclusive===e.endExclusive},n.prototype.containsRange=function(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive},n.prototype.contains=function(e){return this.start<=e&&e<this.endExclusive},n.prototype.join=function(e){return new n(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))},n.prototype.intersect=function(e){var t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(t<=r)return new n(t,r)},n.prototype.intersectionLength=function(e){var t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-t)},n.prototype.intersects=function(e){var t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return t<r},n.prototype.intersectsOrTouches=function(e){var t=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return t<=r},n.prototype.isBefore=function(e){return this.endExclusive<=e.start},n.prototype.isAfter=function(e){return this.start>=e.endExclusive},n.prototype.slice=function(e){return e.slice(this.start,this.endExclusive)},n.prototype.substring=function(e){return e.substring(this.start,this.endExclusive)},n.prototype.clip=function(e){if(this.isEmpty)throw new K("Invalid clipping range: ".concat(this.toString()));return Math.max(this.start,Math.min(this.endExclusive-1,e))},n.prototype.clipCyclic=function(e){if(this.isEmpty)throw new K("Invalid clipping range: ".concat(this.toString()));return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e},n.prototype.map=function(e){for(var t=[],r=this.start;r<this.endExclusive;r++)t.push(e(r));return t},n.prototype.forEach=function(e){for(var t=this.start;t<this.endExclusive;t++)e(t)},n}(),v=function(){function n(e,t){this.lineNumber=e,this.column=t}return n.prototype.equals=function(e){return n.equals(this,e)},n.equals=function(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column},n.prototype.isBefore=function(e){return n.isBefore(this,e)},n.isBefore=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column},n.prototype.isBeforeOrEqual=function(e){return n.isBeforeOrEqual(this,e)},n.isBeforeOrEqual=function(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column},n}(),g=function(){function n(e,t,r,i){e>r||e===r&&t>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=r,this.endColumn=i)}return n.prototype.isEmpty=function(){return n.isEmpty(this)},n.isEmpty=function(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn},n.prototype.containsPosition=function(e){return n.containsPosition(this,e)},n.containsPosition=function(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)},n.prototype.containsRange=function(e){return n.containsRange(this,e)},n.containsRange=function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)},n.prototype.strictContainsRange=function(e){return n.strictContainsRange(this,e)},n.strictContainsRange=function(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)},n.prototype.plusRange=function(e){return n.plusRange(this,e)},n.plusRange=function(e,t){var r,i,o,s;return t.startLineNumber<e.startLineNumber?(r=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(r=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new n(r,i,o,s)},n.prototype.intersectRanges=function(e){return n.intersectRanges(this,e)},n.intersectRanges=function(e,t){var r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,d=t.startLineNumber,c=t.startColumn,h=t.endLineNumber,m=t.endColumn;return r<d?(r=d,i=c):r===d&&(i=Math.max(i,c)),o>h?(o=h,s=m):o===h&&(s=Math.min(s,m)),r>o||r===o&&i>s?null:new n(r,i,o,s)},n.prototype.equalsRange=function(e){return n.equalsRange(this,e)},n.equalsRange=function(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn},n.prototype.getEndPosition=function(){return n.getEndPosition(this)},n.getEndPosition=function(e){return new v(e.endLineNumber,e.endColumn)},n.prototype.getStartPosition=function(){return n.getStartPosition(this)},n.getStartPosition=function(e){return new v(e.startLineNumber,e.startColumn)},n.prototype.collapseToStart=function(){return n.collapseToStart(this)},n.collapseToStart=function(e){return new n(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)},n.prototype.collapseToEnd=function(){return n.collapseToEnd(this)},n.collapseToEnd=function(e){return new n(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)},n.fromPositions=function(e,t){return t===void 0&&(t=e),new n(e.lineNumber,e.column,t.lineNumber,t.column)},n}();function B(n,e){var t=N(n,e);return t===-1?void 0:n[t]}function N(n,e,t,r){t===void 0&&(t=0),r===void 0&&(r=n.length);for(var i=t,o=r;i<o;){var s=Math.floor((i+o)/2);e(n[s])?i=s+1:o=s}return i-1}function ee(n,e){var t=J(n,e);return t===n.length?void 0:n[t]}function J(n,e,t,r){t===void 0&&(t=0),r===void 0&&(r=n.length);for(var i=t,o=r;i<o;){var s=Math.floor((i+o)/2);e(n[s])?o=s:i=s+1}return i}var te=function(){function n(e){this._array=e,this._findLastMonotonousLastIdx=0}return n.prototype.findLastMonotonous=function(e){var t,r;if(_.assertInvariants){if(this._prevFindLastPredicate)try{for(var i=I(this._array),o=i.next();!o.done;o=i.next()){var s=o.value;if(this._prevFindLastPredicate(s)&&!e(s))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}}catch(c){t={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}this._prevFindLastPredicate=e}var d=N(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=d+1,d===-1?void 0:this._array[d]},n}();_=te,function(){_.assertInvariants=!1}();var $=function(){function n(e,t){if(e>t)throw new K("startLineNumber ".concat(e," cannot be after endLineNumberExclusive ").concat(t));this.startLineNumber=e,this.endLineNumberExclusive=t}return n.fromRangeInclusive=function(e){return new n(e.startLineNumber,e.endLineNumber+1)},n.join=function(e){if(e.length===0)throw new K("lineRanges cannot be empty");for(var t=e[0].startLineNumber,r=e[0].endLineNumberExclusive,i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new n(t,r)},n.ofLength=function(e,t){return new n(e,e+t)},Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this.startLineNumber===this.endLineNumberExclusive},enumerable:!1,configurable:!0}),n.prototype.delta=function(e){return new n(this.startLineNumber+e,this.endLineNumberExclusive+e)},Object.defineProperty(n.prototype,"length",{get:function(){return this.endLineNumberExclusive-this.startLineNumber},enumerable:!1,configurable:!0}),n.prototype.join=function(e){return new n(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))},n.prototype.intersect=function(e){var t=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=r)return new n(t,r)},n.prototype.overlapOrTouch=function(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive},n.prototype.toInclusiveRange=function(){return this.isEmpty?null:new g(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)},n.prototype.toOffsetRange=function(){return new l(this.startLineNumber-1,this.endLineNumberExclusive-1)},n}(),ne=function(){function n(e){e===void 0&&(e=[]),this._normalizedRanges=e}return Object.defineProperty(n.prototype,"ranges",{get:function(){return this._normalizedRanges},enumerable:!1,configurable:!0}),n.prototype.addRange=function(e){if(e.length!==0){var t=J(this._normalizedRanges,function(o){return o.endLineNumberExclusive>=e.startLineNumber}),r=N(this._normalizedRanges,function(o){return o.startLineNumber<=e.endLineNumberExclusive})+1;if(t===r)this._normalizedRanges.splice(t,0,e);else if(t===r-1){var i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{var i=this._normalizedRanges[t].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(t,r-t,i)}}},n.prototype.contains=function(e){var t=B(this._normalizedRanges,function(r){return r.startLineNumber<=e});return!!t&&t.endLineNumberExclusive>e},n.prototype.subtractFrom=function(e){var t=J(this._normalizedRanges,function(c){return c.endLineNumberExclusive>=e.startLineNumber}),r=N(this._normalizedRanges,function(c){return c.startLineNumber<=e.endLineNumberExclusive})+1;if(t===r)return new n([e]);for(var i=[],o=e.startLineNumber,s=t;s<r;s++){var d=this._normalizedRanges[s];d.startLineNumber>o&&i.push(new $(o,d.startLineNumber)),o=d.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new $(o,e.endLineNumberExclusive)),new n(i)},n.prototype.getIntersection=function(e){for(var t=[],r=0,i=0;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){var o=this._normalizedRanges[r],s=e._normalizedRanges[i],d=o.intersect(s);d&&!d.isEmpty&&t.push(d),o.endLineNumberExclusive<s.endLineNumberExclusive?r++:i++}return new n(t)},n.prototype.getWithDelta=function(e){return new n(this._normalizedRanges.map(function(t){return t.delta(e)}))},n}(),Q=function(){function n(e,t){this.lineCount=e,this.columnCount=t}return n.prototype.toLineRange=function(){return $.ofLength(1,this.lineCount)},n.prototype.addToPosition=function(e){return this.lineCount===0?new v(e.lineNumber,e.column+this.columnCount):new v(e.lineNumber+this.lineCount,this.columnCount+1)},n}();L=Q,function(){L.zero=new L(0,0)}();var be=function(){function n(e,t){me(t>=1),this._getLineContent=e,this._lineCount=t}return n.prototype.getValueOfRange=function(e){if(e.startLineNumber===e.endLineNumber)return this._getLineContent(e.startLineNumber).substring(e.startColumn-1,e.endColumn-1);for(var t=this._getLineContent(e.startLineNumber).substring(e.startColumn-1),r=e.startLineNumber+1;r<e.endLineNumber;r++)t+=`
`+this._getLineContent(r);return t+=`
`+this._getLineContent(e.endLineNumber).substring(0,e.endColumn-1),t},n.prototype.getLineLength=function(e){return this._getLineContent(e).length},Object.defineProperty(n.prototype,"length",{get:function(){var e=this._getLineContent(this._lineCount);return new Q(this._lineCount-1,e.length)},enumerable:!1,configurable:!0}),n}(),ae=function(n){Z(e,n);function e(t){return n.call(this,function(r){return t[r-1]},t.length)||this}return e}(be),he=function(){function n(e,t,r){this.changes=e,this.moves=t,this.hitTimeout=r}return n}(),pe=function(){function n(e,t){this.lineRangeMapping=e,this.changes=t}return n}(),Le=function(){function n(e,t){this.original=e,this.modified=t}return n.prototype.join=function(e){return new n(this.original.join(e.original),this.modified.join(e.modified))},Object.defineProperty(n.prototype,"changedLineCount",{get:function(){return Math.max(this.original.length,this.modified.length)},enumerable:!1,configurable:!0}),n.prototype.toRangeMapping=function(){var e=this.original.toInclusiveRange(),t=this.modified.toInclusiveRange();if(e&&t)return new Y(e,t);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new K("not a valid diff");return new Y(new g(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new g(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Y(new g(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new g(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))},n.prototype.toRangeMapping2=function(e,t){if(Fe(this.original.endLineNumberExclusive,e)&&Fe(this.modified.endLineNumberExclusive,t))return new Y(new g(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new g(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Y(g.fromPositions(new v(this.original.startLineNumber,1),Ae(new v(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),g.fromPositions(new v(this.modified.startLineNumber,1),Ae(new v(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Y(g.fromPositions(Ae(new v(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),Ae(new v(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),g.fromPositions(Ae(new v(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),t),Ae(new v(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),t)));throw new K},n}();function Ae(n,e){if(n.lineNumber<1)return new v(1,1);if(n.lineNumber>e.length)return new v(e.length,e[e.length-1].length+1);var t=e[n.lineNumber-1];return n.column>t.length+1?new v(n.lineNumber,t.length+1):n}function Fe(n,e){return n>=1&&n<=e.length}var je=function(n){Z(e,n);function e(t,r,i){var o=n.call(this,t,r)||this;return o.innerChanges=i,o}return e.fromRangeMappings=function(t){var r=$.join(t.map(function(o){return $.fromRangeInclusive(o.originalRange)})),i=$.join(t.map(function(o){return $.fromRangeInclusive(o.modifiedRange)}));return new e(r,i,t)},e.prototype.flip=function(){var t;return new e(this.modified,this.original,(t=this.innerChanges)===null||t===void 0?void 0:t.map(function(r){return r.flip()}))},e.prototype.withInnerChangesFromLineRanges=function(){return new e(this.original,this.modified,[this.toRangeMapping()])},e}(Le),Y=function(){function n(e,t){this.originalRange=e,this.modifiedRange=t}return n.join=function(e){if(e.length===0)throw new K("Cannot join an empty list of range mappings");for(var t=e[0],r=1;r<e.length;r++)t=t.join(e[r]);return t},n.assertSorted=function(e){for(var t=1;t<e.length;t++){var r=e[t-1],i=e[t];if(!(r.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&r.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new K("Range mappings must be sorted")}},n.prototype.flip=function(){return new n(this.modifiedRange,this.originalRange)},n.prototype.join=function(e){return new n(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))},n}();function $e(n,e,t,r){var i,o;r===void 0&&(r=!1);var s=[];try{for(var d=I(O(n.map(function(E){return qe(E,e,t)}),function(E,x){return E.original.overlapOrTouch(x.original)||E.modified.overlapOrTouch(x.modified)})),c=d.next();!c.done;c=d.next()){var h=c.value,m=h[0],b=h[h.length-1];s.push(new je(m.original.join(b.original),m.modified.join(b.modified),h.map(function(E){return E.innerChanges[0]})))}}catch(E){i={error:E}}finally{try{c&&!c.done&&(o=d.return)&&o.call(d)}finally{if(i)throw i.error}}return y(function(){return!r&&s.length>0&&(s[0].modified.startLineNumber!==s[0].original.startLineNumber||t.length.lineCount-s[s.length-1].modified.endLineNumberExclusive!==e.length.lineCount-s[s.length-1].original.endLineNumberExclusive)?!1:a(s,function(E,x){return x.original.startLineNumber-E.original.endLineNumberExclusive===x.modified.startLineNumber-E.modified.endLineNumberExclusive&&E.original.endLineNumberExclusive<x.original.startLineNumber&&E.modified.endLineNumberExclusive<x.modified.startLineNumber})}),s}function qe(n,e,t){var r=0,i=0;n.modifiedRange.endColumn===1&&n.originalRange.endColumn===1&&n.originalRange.startLineNumber+r<=n.originalRange.endLineNumber&&n.modifiedRange.startLineNumber+r<=n.modifiedRange.endLineNumber&&(i=-1),n.modifiedRange.startColumn-1>=t.getLineLength(n.modifiedRange.startLineNumber)&&n.originalRange.startColumn-1>=e.getLineLength(n.originalRange.startLineNumber)&&n.originalRange.startLineNumber<=n.originalRange.endLineNumber+i&&n.modifiedRange.startLineNumber<=n.modifiedRange.endLineNumber+i&&(r=1);var o=new $(n.originalRange.startLineNumber+r,n.originalRange.endLineNumber+1+i),s=new $(n.modifiedRange.startLineNumber+r,n.modifiedRange.endLineNumber+1+i);return new je(o,s,[n])}var ke=function(){function n(e,t){this.diffs=e,this.hitTimeout=t}return n.trivial=function(e,t){return new n([new ue(l.ofLength(e.length),l.ofLength(t.length))],!1)},n.trivialTimedOut=function(e,t){return new n([new ue(l.ofLength(e.length),l.ofLength(t.length))],!0)},n}(),ue=function(){function n(e,t){this.seq1Range=e,this.seq2Range=t}return n.invert=function(e,t){var r=[];return D(e,function(i,o){r.push(n.fromOffsetPairs(i?i.getEndExclusives():De.zero,o?o.getStarts():new De(t,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+t)))}),r},n.fromOffsetPairs=function(e,t){return new n(new l(e.offset1,t.offset1),new l(e.offset2,t.offset2))},n.assertSorted=function(e){var t,r,i=void 0;try{for(var o=I(e),s=o.next();!s.done;s=o.next()){var d=s.value;if(i&&!(i.seq1Range.endExclusive<=d.seq1Range.start&&i.seq2Range.endExclusive<=d.seq2Range.start))throw new K("Sequence diffs must be sorted");i=d}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}},n.prototype.swap=function(){return new n(this.seq2Range,this.seq1Range)},n.prototype.join=function(e){return new n(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))},n.prototype.delta=function(e){return e===0?this:new n(this.seq1Range.delta(e),this.seq2Range.delta(e))},n.prototype.deltaStart=function(e){return e===0?this:new n(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))},n.prototype.deltaEnd=function(e){return e===0?this:new n(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))},n.prototype.intersect=function(e){var t=this.seq1Range.intersect(e.seq1Range),r=this.seq2Range.intersect(e.seq2Range);if(!(!t||!r))return new n(t,r)},n.prototype.getStarts=function(){return new De(this.seq1Range.start,this.seq2Range.start)},n.prototype.getEndExclusives=function(){return new De(this.seq1Range.endExclusive,this.seq2Range.endExclusive)},n}(),De=function(){function n(e,t){this.offset1=e,this.offset2=t}return n.prototype.delta=function(e){return e===0?this:new u(this.offset1+e,this.offset2+e)},n.prototype.equals=function(e){return this.offset1===e.offset1&&this.offset2===e.offset2},n}();u=De,function(){u.zero=new u(0,0)}(),function(){u.max=new u(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}();var He=function(){function n(){}return n.prototype.isValid=function(){return!0},n}();f=He,function(){f.instance=new f}();var Ve=function(){function n(e){if(this.timeout=e,this.startTime=Date.now(),this.valid=!0,e<=0)throw new K("timeout must be positive")}return n.prototype.isValid=function(){var e=Date.now()-this.startTime<this.timeout;return!e&&this.valid&&(this.valid=!1),this.valid},n.prototype.disable=function(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=function(){return!0},this.valid=!0},n}(),Me=function(){function n(e,t){this.width=e,this.height=t,this.array=[],this.array=new Array(e*t)}return n.prototype.get=function(e,t){return this.array[e+t*this.width]},n.prototype.set=function(e,t,r){this.array[e+t*this.width]=r},n}();function Ke(n){return n===32||n===9}var it=function(){function n(e,t,r){this.range=e,this.lines=t,this.source=r,this.histogram=[];for(var i=0,o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){for(var s=t[o],d=0;d<s.length;d++){i++;var c=s[d],h=p.getKey(c);this.histogram[h]=(this.histogram[h]||0)+1}i++;var m=p.getKey(`
`);this.histogram[m]=(this.histogram[m]||0)+1}this.totalCount=i}return n.getKey=function(e){var t=this.chrKeys.get(e);return t===void 0&&(t=this.chrKeys.size,this.chrKeys.set(e,t)),t},n.prototype.computeSimilarity=function(e){for(var t,r,i=0,o=Math.max(this.histogram.length,e.histogram.length),s=0;s<o;s++)i+=Math.abs(((t=this.histogram[s])!==null&&t!==void 0?t:0)-((r=e.histogram[s])!==null&&r!==void 0?r:0));return 1-i/(this.totalCount+e.totalCount)},n}();p=it,function(){p.chrKeys=new Map}();var Rt=function(){function n(){}return n.prototype.compute=function(e,t,r,i){if(r===void 0&&(r=He.instance),e.length===0||t.length===0)return ke.trivial(e,t);for(var o=new Me(e.length,t.length),s=new Me(e.length,t.length),d=new Me(e.length,t.length),c=0;c<e.length;c++)for(var h=0;h<t.length;h++){if(!r.isValid())return ke.trivialTimedOut(e,t);var m=c===0?0:o.get(c-1,h),b=h===0?0:o.get(c,h-1),E=void 0;e.getElement(c)===t.getElement(h)?(c===0||h===0?E=0:E=o.get(c-1,h-1),c>0&&h>0&&s.get(c-1,h-1)===3&&(E+=d.get(c-1,h-1)),E+=i?i(c,h):1):E=-1;var x=Math.max(m,b,E);if(x===E){var C=c>0&&h>0?d.get(c-1,h-1):0;d.set(c,h,C+1),s.set(c,h,3)}else x===m?(d.set(c,h,0),s.set(c,h,1)):x===b&&(d.set(c,h,0),s.set(c,h,2));o.set(c,h,x)}var R=[],T=e.length,M=t.length;function H(W,de){(W+1!==T||de+1!==M)&&R.push(new ue(new l(W+1,T),new l(de+1,M))),T=W,M=de}for(var A=e.length-1,z=t.length-1;A>=0&&z>=0;)s.get(A,z)===3?(H(A,z),A--,z--):s.get(A,z)===1?A--:z--;return H(-1,-1),R.reverse(),new ke(R,!1)},n}(),at=function(){function n(){}return n.prototype.compute=function(e,t,r){if(r===void 0&&(r=He.instance),e.length===0||t.length===0)return ke.trivial(e,t);var i=e,o=t;function s(ve,we){for(;ve<i.length&&we<o.length&&i.getElement(ve)===o.getElement(we);)ve++,we++;return ve}var d=0,c=new St;c.set(0,s(0,0));var h=new Nt;h.set(0,c.get(0)===0?null:new ut(null,0,0,c.get(0)));var m=0;e:for(;;){if(d++,!r.isValid())return ke.trivialTimedOut(i,o);var b=-Math.min(d,o.length+d%2),E=Math.min(d,i.length+d%2);for(m=b;m<=E;m+=2){var x=m===E?-1:c.get(m+1),C=m===b?-1:c.get(m-1)+1,R=Math.min(Math.max(x,C),i.length),T=R-m;if(!(R>i.length||T>o.length)){var M=s(R,T);c.set(m,M);var H=R===x?h.get(m+1):h.get(m-1);if(h.set(m,M!==R?new ut(H,R,T,M-R):H),c.get(m)===i.length&&c.get(m)-m===o.length)break e}}}for(var A=h.get(m),z=[],W=i.length,de=o.length;;){var ye=A?A.x+A.length:0,ie=A?A.y+A.length:0;if((ye!==W||ie!==de)&&z.push(new ue(new l(ye,W),new l(ie,de))),!A)break;W=A.x,de=A.y,A=A.prev}return z.reverse(),new ke(z,!1)},n}(),ut=function(){function n(e,t,r,i){this.prev=e,this.x=t,this.y=r,this.length=i}return n}(),St=function(){function n(){this.positiveArr=new Int32Array(10),this.negativeArr=new Int32Array(10)}return n.prototype.get=function(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]},n.prototype.set=function(e,t){if(e<0){if(e=-e-1,e>=this.negativeArr.length){var r=this.negativeArr;this.negativeArr=new Int32Array(r.length*2),this.negativeArr.set(r)}this.negativeArr[e]=t}else{if(e>=this.positiveArr.length){var r=this.positiveArr;this.positiveArr=new Int32Array(r.length*2),this.positiveArr.set(r)}this.positiveArr[e]=t}},n}(),Nt=function(){function n(){this.positiveArr=[],this.negativeArr=[]}return n.prototype.get=function(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]},n.prototype.set=function(e,t){e<0?(e=-e-1,this.negativeArr[e]=t):this.positiveArr[e]=t},n}(),At=function(){function n(){this.map=new Map}return n.prototype.add=function(e,t){var r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(t)},n.prototype.forEach=function(e,t){var r=this.map.get(e);r&&r.forEach(t)},n.prototype.get=function(e){var t=this.map.get(e);return t||new Set},n}(),nt=function(){function n(e,t,r){this.lines=e,this.range=t,this.considerWhitespaceChanges=r,this.elements=[],this.firstElementOffsetByLineIdx=[],this.lineStartOffsets=[],this.trimmedWsLengthsByLineIdx=[],this.firstElementOffsetByLineIdx.push(0);for(var i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){var o=e[i-1],s=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(s=this.range.startColumn-1,o=o.substring(s)),this.lineStartOffsets.push(s);var d=0;if(!r){var c=o.trimStart();d=o.length-c.length,o=c.trimEnd()}this.trimmedWsLengthsByLineIdx.push(d);for(var h=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-s-d,o.length):o.length,m=0;m<h;m++)this.elements.push(o.charCodeAt(m));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}return n.prototype.toString=function(){return'Slice: "'.concat(this.text,'"')},Object.defineProperty(n.prototype,"text",{get:function(){return this.getText(new l(0,this.length))},enumerable:!1,configurable:!0}),n.prototype.getText=function(e){return this.elements.slice(e.start,e.endExclusive).map(function(t){return String.fromCharCode(t)}).join("")},n.prototype.getElement=function(e){return this.elements[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.elements.length},enumerable:!1,configurable:!0}),n.prototype.getBoundaryScore=function(e){var t=ht(e>0?this.elements[e-1]:-1),r=ht(e<this.elements.length?this.elements[e]:-1);if(t===7&&r===8)return 0;if(t===8)return 150;var i=0;return t!==r&&(i+=10,t===0&&r===1&&(i+=1)),i+=ft(t),i+=ft(r),i},n.prototype.translateOffset=function(e,t){t===void 0&&(t="right");var r=N(this.firstElementOffsetByLineIdx,function(o){return o<=e}),i=e-this.firstElementOffsetByLineIdx[r];return new v(this.range.startLineNumber+r,1+this.lineStartOffsets[r]+i+(i===0&&t==="left"?0:this.trimmedWsLengthsByLineIdx[r]))},n.prototype.translateRange=function(e){var t=this.translateOffset(e.start,"right"),r=this.translateOffset(e.endExclusive,"left");return r.isBefore(t)?g.fromPositions(r,r):g.fromPositions(t,r)},n.prototype.findWordContaining=function(e){if(!(e<0||e>=this.elements.length)&&Ye(this.elements[e])){for(var t=e;t>0&&Ye(this.elements[t-1]);)t--;for(var r=e;r<this.elements.length&&Ye(this.elements[r]);)r++;return new l(t,r)}},n.prototype.findSubWordContaining=function(e){if(!(e<0||e>=this.elements.length)&&Ye(this.elements[e])){for(var t=e;t>0&&Ye(this.elements[t-1])&&!lt(this.elements[t]);)t--;for(var r=e;r<this.elements.length&&Ye(this.elements[r])&&!lt(this.elements[r]);)r++;return new l(t,r)}},n.prototype.countLinesIn=function(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber},n.prototype.isStronglyEqual=function(e,t){return this.elements[e]===this.elements[t]},n.prototype.extendToFullLines=function(e){var t,r,i=(t=B(this.firstElementOffsetByLineIdx,function(s){return s<=e.start}))!==null&&t!==void 0?t:0,o=(r=ee(this.firstElementOffsetByLineIdx,function(s){return e.endExclusive<=s}))!==null&&r!==void 0?r:this.elements.length;return new l(i,o)},n}();function Ye(n){return n>=97&&n<=122||n>=65&&n<=90||n>=48&&n<=57}function lt(n){return n>=65&&n<=90}var Ct=(U={},U[0]=0,U[1]=0,U[2]=0,U[3]=10,U[4]=2,U[5]=30,U[6]=3,U[7]=10,U[8]=10,U);function ft(n){return Ct[n]}function ht(n){return n===10?8:n===13?7:Ke(n)?6:n>=97&&n<=122?0:n>=65&&n<=90?1:n>=48&&n<=57?2:n===-1?3:n===44||n===59?5:4}function Bt(n,e,t,r,i,o){var s=$t(n,e,t,o),d=s.moves,c=s.excludedChanges;if(!o.isValid())return[];var h=n.filter(function(b){return!c.has(b)}),m=kt(h,r,i,e,t,o);return F(d,m),d=Dt(d),d=d.filter(function(b){var E=b.original.toOffsetRange().slice(e).map(function(C){return C.trim()}),x=E.join(`
`);return x.length>=15&&_t(E,function(C){return C.length>=2})>=2}),d=Tt(n,d),d}function _t(n,e){var t,r,i=0;try{for(var o=I(n),s=o.next();!s.done;s=o.next()){var d=s.value;e(d)&&i++}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return i}function $t(n,e,t,r){var i,o,s,d,c=[],h=n.filter(function(W){return W.modified.isEmpty&&W.original.length>=3}).map(function(W){return new it(W.original,e,W)}),m=new Set(n.filter(function(W){return W.original.isEmpty&&W.modified.length>=3}).map(function(W){return new it(W.modified,t,W)})),b=new Set;try{for(var E=I(h),x=E.next();!x.done;x=E.next()){var C=x.value,R=-1,T=void 0;try{for(var M=(s=void 0,I(m)),H=M.next();!H.done;H=M.next()){var A=H.value,z=C.computeSimilarity(A);z>R&&(R=z,T=A)}}catch(W){s={error:W}}finally{try{H&&!H.done&&(d=M.return)&&d.call(M)}finally{if(s)throw s.error}}if(R>.9&&T&&(m.delete(T),c.push(new Le(C.range,T.range)),b.add(C.source),b.add(T.source)),!r.isValid())return{moves:c,excludedChanges:b}}}catch(W){i={error:W}}finally{try{x&&!x.done&&(o=E.return)&&o.call(E)}finally{if(i)throw i.error}}return{moves:c,excludedChanges:b}}function kt(n,e,t,r,i,o){var s,d,c,h,m,b,E,x,C=[],R=new At;try{for(var T=I(n),M=T.next();!M.done;M=T.next())for(var H=M.value,A=H.original.startLineNumber;A<H.original.endLineNumberExclusive-2;A++){var z="".concat(e[A-1],":").concat(e[A+1-1],":").concat(e[A+2-1]);R.add(z,{range:new $(A,A+3)})}}catch(j){s={error:j}}finally{try{M&&!M.done&&(d=T.return)&&d.call(T)}finally{if(s)throw s.error}}var W=[];n.sort(le(function(j){return j.modified.startLineNumber},re));var de=function(j){for(var q=[],Je=function(ze){var st="".concat(t[ze-1],":").concat(t[ze+1-1],":").concat(t[ze+2-1]),Ze=new $(ze,ze+3),et=[];R.forEach(st,function(Ne){var Be,Pe,ge=Ne.range;try{for(var _e=(Be=void 0,I(q)),tt=_e.next();!tt.done;tt=_e.next()){var Xe=tt.value;if(Xe.originalLineRange.endLineNumberExclusive+1===ge.endLineNumberExclusive&&Xe.modifiedLineRange.endLineNumberExclusive+1===Ze.endLineNumberExclusive){Xe.originalLineRange=new $(Xe.originalLineRange.startLineNumber,ge.endLineNumberExclusive),Xe.modifiedLineRange=new $(Xe.modifiedLineRange.startLineNumber,Ze.endLineNumberExclusive),et.push(Xe);return}}}catch(Vt){Be={error:Vt}}finally{try{tt&&!tt.done&&(Pe=_e.return)&&Pe.call(_e)}finally{if(Be)throw Be.error}}var bt={modifiedLineRange:Ze,originalLineRange:ge};W.push(bt),et.push(bt)}),q=et},Qe=j.modified.startLineNumber;Qe<j.modified.endLineNumberExclusive-2;Qe++)Je(Qe);if(!o.isValid())return{value:[]}};try{for(var ye=I(n),ie=ye.next();!ie.done;ie=ye.next()){var H=ie.value,ve=de(H);if(typeof ve=="object")return ve.value}}catch(j){c={error:j}}finally{try{ie&&!ie.done&&(h=ye.return)&&h.call(ye)}finally{if(c)throw c.error}}W.sort(fe(le(function(j){return j.modifiedLineRange.length},re)));var we=new ne,Ce=new ne;try{for(var Ie=I(W),P=Ie.next();!P.done;P=Ie.next()){var V=P.value,xe=V.modifiedLineRange.startLineNumber-V.originalLineRange.startLineNumber,Te=we.subtractFrom(V.modifiedLineRange),Re=Ce.subtractFrom(V.originalLineRange).getWithDelta(xe),Se=Te.getIntersection(Re);try{for(var oe=(E=void 0,I(Se.ranges)),se=oe.next();!se.done;se=oe.next()){var ce=se.value;if(!(ce.length<3)){var We=ce,Oe=ce.delta(-xe);C.push(new Le(Oe,We)),we.addRange(We),Ce.addRange(Oe)}}}catch(j){E={error:j}}finally{try{se&&!se.done&&(x=oe.return)&&x.call(oe)}finally{if(E)throw E.error}}}}catch(j){m={error:j}}finally{try{P&&!P.done&&(b=Ie.return)&&b.call(Ie)}finally{if(m)throw m.error}}C.sort(le(function(j){return j.original.startLineNumber},re));for(var Ge=new te(n),ot=function(j){var q=C[j],Je=Ge.findLastMonotonous(function(_e){return _e.original.startLineNumber<=q.original.startLineNumber}),Qe=B(n,function(_e){return _e.modified.startLineNumber<=q.modified.startLineNumber}),ze=Math.max(q.original.startLineNumber-Je.original.startLineNumber,q.modified.startLineNumber-Qe.modified.startLineNumber),st=Ge.findLastMonotonous(function(_e){return _e.original.startLineNumber<q.original.endLineNumberExclusive}),Ze=B(n,function(_e){return _e.modified.startLineNumber<q.modified.endLineNumberExclusive}),et=Math.max(st.original.endLineNumberExclusive-q.original.endLineNumberExclusive,Ze.modified.endLineNumberExclusive-q.modified.endLineNumberExclusive),Ne=void 0;for(Ne=0;Ne<ze;Ne++){var Be=q.original.startLineNumber-Ne-1,Pe=q.modified.startLineNumber-Ne-1;if(Be>r.length||Pe>i.length||we.contains(Pe)||Ce.contains(Be)||!ct(r[Be-1],i[Pe-1],o))break}Ne>0&&(Ce.addRange(new $(q.original.startLineNumber-Ne,q.original.startLineNumber)),we.addRange(new $(q.modified.startLineNumber-Ne,q.modified.startLineNumber)));var ge=void 0;for(ge=0;ge<et;ge++){var Be=q.original.endLineNumberExclusive+ge,Pe=q.modified.endLineNumberExclusive+ge;if(Be>r.length||Pe>i.length||we.contains(Pe)||Ce.contains(Be)||!ct(r[Be-1],i[Pe-1],o))break}ge>0&&(Ce.addRange(new $(q.original.endLineNumberExclusive,q.original.endLineNumberExclusive+ge)),we.addRange(new $(q.modified.endLineNumberExclusive,q.modified.endLineNumberExclusive+ge))),(Ne>0||ge>0)&&(C[j]=new Le(new $(q.original.startLineNumber-Ne,q.original.endLineNumberExclusive+ge),new $(q.modified.startLineNumber-Ne,q.modified.endLineNumberExclusive+ge)))},A=0;A<C.length;A++)ot(A);return C}function ct(n,e,t){var r,i;if(n.trim()===e.trim())return!0;if(n.length>300&&e.length>300)return!1;var o=new at,s=o.compute(new nt([n],new g(1,1,1,n.length),!1),new nt([e],new g(1,1,1,e.length),!1),t),d=0,c=ue.invert(s.diffs,n.length);try{for(var h=I(c),m=h.next();!m.done;m=h.next()){var b=m.value;b.seq1Range.forEach(function(R){Ke(n.charCodeAt(R))||d++})}}catch(R){r={error:R}}finally{try{m&&!m.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}function E(R){for(var T=0,M=0;M<n.length;M++)Ke(R.charCodeAt(M))||T++;return T}var x=E(n.length>e.length?n:e),C=d/x>.6&&x>10;return C}function Dt(n){if(n.length===0)return n;n.sort(le(function(c){return c.original.startLineNumber},re));for(var e=[n[0]],t=1;t<n.length;t++){var r=e[e.length-1],i=n[t],o=i.original.startLineNumber-r.original.endLineNumberExclusive,s=i.modified.startLineNumber-r.modified.endLineNumberExclusive,d=o>=0&&s>=0;if(d&&o+s<=2){e[e.length-1]=r.join(i);continue}e.push(i)}return e}function Tt(n,e){var t=new te(n);return e=e.filter(function(r){var i=t.findLastMonotonous(function(d){return d.original.startLineNumber<r.original.endLineNumberExclusive})||new Le(new $(1,1),new $(1,1)),o=B(n,function(d){return d.modified.startLineNumber<r.modified.endLineNumberExclusive}),s=i!==o;return s}),e}function dt(n,e,t){var r=t;return r=vt(n,e,r),r=vt(n,e,r),r=Mt(n,e,r),r}function vt(n,e,t){if(t.length===0)return t;var r=[];r.push(t[0]);for(var i=1;i<t.length;i++){var o=r[r.length-1],s=t[i];if(s.seq1Range.isEmpty||s.seq2Range.isEmpty){var d=s.seq1Range.start-o.seq1Range.endExclusive,c=void 0;for(c=1;c<=d&&!(n.getElement(s.seq1Range.start-c)!==n.getElement(s.seq1Range.endExclusive-c)||e.getElement(s.seq2Range.start-c)!==e.getElement(s.seq2Range.endExclusive-c));c++);if(c--,c===d){r[r.length-1]=new ue(new l(o.seq1Range.start,s.seq1Range.endExclusive-d),new l(o.seq2Range.start,s.seq2Range.endExclusive-d));continue}s=s.delta(-c)}r.push(s)}for(var h=[],i=0;i<r.length-1;i++){var m=r[i+1],s=r[i];if(s.seq1Range.isEmpty||s.seq2Range.isEmpty){var d=m.seq1Range.start-s.seq1Range.endExclusive,c=void 0;for(c=0;c<d&&!(!n.isStronglyEqual(s.seq1Range.start+c,s.seq1Range.endExclusive+c)||!e.isStronglyEqual(s.seq2Range.start+c,s.seq2Range.endExclusive+c));c++);if(c===d){r[i+1]=new ue(new l(s.seq1Range.start+d,m.seq1Range.endExclusive),new l(s.seq2Range.start+d,m.seq2Range.endExclusive));continue}c>0&&(s=s.delta(c))}h.push(s)}return r.length>0&&h.push(r[r.length-1]),h}function Mt(n,e,t){if(!n.getBoundaryScore||!e.getBoundaryScore)return t;for(var r=0;r<t.length;r++){var i=r>0?t[r-1]:void 0,o=t[r],s=r+1<t.length?t[r+1]:void 0,d=new l(i?i.seq1Range.endExclusive+1:0,s?s.seq1Range.start-1:n.length),c=new l(i?i.seq2Range.endExclusive+1:0,s?s.seq2Range.start-1:e.length);o.seq1Range.isEmpty?t[r]=gt(o,n,e,d,c):o.seq2Range.isEmpty&&(t[r]=gt(o.swap(),e,n,c,d).swap())}return t}function gt(n,e,t,r,i){for(var o=100,s=1;n.seq1Range.start-s>=r.start&&n.seq2Range.start-s>=i.start&&t.isStronglyEqual(n.seq2Range.start-s,n.seq2Range.endExclusive-s)&&s<o;)s++;s--;for(var d=0;n.seq1Range.start+d<r.endExclusive&&n.seq2Range.endExclusive+d<i.endExclusive&&t.isStronglyEqual(n.seq2Range.start+d,n.seq2Range.endExclusive+d)&&d<o;)d++;if(s===0&&d===0)return n;for(var c=0,h=-1,m=-s;m<=d;m++){var b=n.seq2Range.start+m,E=n.seq2Range.endExclusive+m,x=n.seq1Range.start+m,C=e.getBoundaryScore(x)+t.getBoundaryScore(b)+t.getBoundaryScore(E);C>h&&(h=C,c=m)}return n.delta(c)}function It(n,e,t){var r,i,o=[];try{for(var s=I(t),d=s.next();!d.done;d=s.next()){var c=d.value,h=o[o.length-1];if(!h){o.push(c);continue}c.seq1Range.start-h.seq1Range.endExclusive<=2||c.seq2Range.start-h.seq2Range.endExclusive<=2?o[o.length-1]=new ue(h.seq1Range.join(c.seq1Range),h.seq2Range.join(c.seq2Range)):o.push(c)}}catch(m){r={error:m}}finally{try{d&&!d.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return o}function mt(n,e,t,r,i){i===void 0&&(i=!1);var o=ue.invert(t,n.length),s=[],d=new De(0,0);function c(b,E){if(!(b.offset1<d.offset1||b.offset2<d.offset2)){var x=r(n,b.offset1),C=r(e,b.offset2);if(!(!x||!C)){for(var R=new ue(x,C),T=R.intersect(E),M=T.seq1Range.length,H=T.seq2Range.length;o.length>0;){var A=o[0],z=A.seq1Range.intersects(R.seq1Range)||A.seq2Range.intersects(R.seq2Range);if(!z)break;var W=r(n,A.seq1Range.start),de=r(e,A.seq2Range.start),ye=new ue(W,de),ie=ye.intersect(A);if(M+=ie.seq1Range.length,H+=ie.seq2Range.length,R=R.join(ye),R.seq1Range.endExclusive>=A.seq1Range.endExclusive)o.shift();else break}(i&&M+H<R.seq1Range.length+R.seq2Range.length||M+H<(R.seq1Range.length+R.seq2Range.length)*2/3)&&s.push(R),d=R.getEndExclusives()}}}for(;o.length>0;){var h=o.shift();h.seq1Range.isEmpty||(c(h.getStarts(),h),c(h.getEndExclusives().delta(-1),h))}var m=Ot(t,s);return m}function Ot(n,e){for(var t=[];n.length>0||e.length>0;){var r=n[0],i=e[0],o=void 0;r&&(!i||r.seq1Range.start<i.seq1Range.start)?o=n.shift():o=e.shift(),t.length>0&&t[t.length-1].seq1Range.endExclusive>=o.seq1Range.start?t[t.length-1]=t[t.length-1].join(o):t.push(o)}return t}function Pt(n,e,t){var r=t;if(r.length===0)return r;var i=0,o;do{o=!1;for(var s=[r[0]],d=function(h){var m=function(C,R){var T=new l(E.seq1Range.endExclusive,b.seq1Range.start),M=n.getText(T),H=M.replace(/\s/g,"");return H.length<=4&&(C.seq1Range.length+C.seq2Range.length>5||R.seq1Range.length+R.seq2Range.length>5)},b=r[h],E=s[s.length-1],x=m(E,b);x?(o=!0,s[s.length-1]=s[s.length-1].join(b)):s.push(b)},c=1;c<r.length;c++)d(c);r=s}while(i++<10&&o);return r}function Wt(n,e,t){var r=t;if(r.length===0)return r;var i=0,o;do{o=!1;for(var s=[r[0]],d=function(m){var b=function(R,T){var M=new l(x.seq1Range.endExclusive,E.seq1Range.start),H=n.countLinesIn(M);if(H>5||M.length>500)return!1;var A=n.getText(M).trim();if(A.length>20||A.split(/\r\n|\r|\n/).length>1)return!1;var z=n.countLinesIn(R.seq1Range),W=R.seq1Range.length,de=e.countLinesIn(R.seq2Range),ye=R.seq2Range.length,ie=n.countLinesIn(T.seq1Range),ve=T.seq1Range.length,we=e.countLinesIn(T.seq2Range),Ce=T.seq2Range.length,Ie=2*40+50;function P(V){return Math.min(V,Ie)}return Math.pow(Math.pow(P(z*40+W),1.5)+Math.pow(P(de*40+ye),1.5),1.5)+Math.pow(Math.pow(P(ie*40+ve),1.5)+Math.pow(P(we*40+Ce),1.5),1.5)>Math.pow(Math.pow(Ie,1.5),1.5)*1.3},E=r[m],x=s[s.length-1],C=b(x,E);C?(o=!0,s[s.length-1]=s[s.length-1].join(E)):s.push(E)},c=1;c<r.length;c++)d(c);r=s}while(i++<10&&o);var h=[];return S(r,function(m,b,E){var x=b;function C(z){return z.length>0&&z.trim().length<=3&&b.seq1Range.length+b.seq2Range.length>100}var R=n.extendToFullLines(b.seq1Range),T=n.getText(new l(R.start,b.seq1Range.start));C(T)&&(x=x.deltaStart(-T.length));var M=n.getText(new l(b.seq1Range.endExclusive,R.endExclusive));C(M)&&(x=x.deltaEnd(M.length));var H=ue.fromOffsetPairs(m?m.getEndExclusives():De.zero,E?E.getStarts():De.max),A=x.intersect(H);h.length>0&&A.getStarts().equals(h[h.length-1].getEndExclusives())?h[h.length-1]=h[h.length-1].join(A):h.push(A)}),h}var pt=function(){function n(e,t){this.trimmedHash=e,this.lines=t}return n.prototype.getElement=function(e){return this.trimmedHash[e]},Object.defineProperty(n.prototype,"length",{get:function(){return this.trimmedHash.length},enumerable:!1,configurable:!0}),n.prototype.getBoundaryScore=function(e){var t=e===0?0:yt(this.lines[e-1]),r=e===this.lines.length?0:yt(this.lines[e]);return 1e3-(t+r)},n.prototype.getText=function(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)},n.prototype.isStronglyEqual=function(e,t){return this.lines[e]===this.lines[t]},n}();function yt(n){for(var e=0;e<n.length&&(n.charCodeAt(e)===32||n.charCodeAt(e)===9);)e++;return e}var Ft=function(){function n(){this.dynamicProgrammingDiffing=new Rt,this.myersDiffingAlgorithm=new at}return n.prototype.computeDiff=function(e,t,r){var i,o,s=this;if(e.length<=1&&w(e,t,function(P,V){return P===V}))return new he([],[],!1);if(e.length===1&&e[0].length===0||t.length===1&&t[0].length===0)return new he([new je(new $(1,e.length+1),new $(1,t.length+1),[new Y(new g(1,1,e.length,e[e.length-1].length+1),new g(1,1,t.length,t[t.length-1].length+1))])],[],!1);var d=r.maxComputationTimeMs===0?He.instance:new Ve(r.maxComputationTimeMs),c=!r.ignoreTrimWhitespace,h=new Map;function m(P){var V=h.get(P);return V===void 0&&(V=h.size,h.set(P,V)),V}var b=e.map(function(P){return m(P.trim())}),E=t.map(function(P){return m(P.trim())}),x=new pt(b,e),C=new pt(E,t),R=function(){return x.length+C.length<1700?s.dynamicProgrammingDiffing.compute(x,C,d,function(P,V){return e[P]===t[V]?t[V].length===0?.1:1+Math.log(1+t[V].length):.99}):s.myersDiffingAlgorithm.compute(x,C,d)}(),T=R.diffs,M=R.hitTimeout;T=dt(x,C,T),T=Pt(x,C,T);var H=[],A=function(P){var V,xe;if(c)for(var Te=0;Te<P;Te++){var Re=z+Te,Se=W+Te;if(e[Re]!==t[Se]){var oe=s.refineDiff(e,t,new ue(new l(Re,Re+1),new l(Se,Se+1)),d,c,r);try{for(var se=(V=void 0,I(oe.mappings)),ce=se.next();!ce.done;ce=se.next()){var We=ce.value;H.push(We)}}catch(Oe){V={error:Oe}}finally{try{ce&&!ce.done&&(xe=se.return)&&xe.call(se)}finally{if(V)throw V.error}}oe.hitTimeout&&(M=!0)}}},z=0,W=0,de=function(P){var V,xe;y(function(){return P.seq1Range.start-z===P.seq2Range.start-W});var Te=P.seq1Range.start-z;A(Te),z=P.seq1Range.endExclusive,W=P.seq2Range.endExclusive;var Re=ye.refineDiff(e,t,P,d,c,r);Re.hitTimeout&&(M=!0);try{for(var Se=(V=void 0,I(Re.mappings)),oe=Se.next();!oe.done;oe=Se.next()){var se=oe.value;H.push(se)}}catch(ce){V={error:ce}}finally{try{oe&&!oe.done&&(xe=Se.return)&&xe.call(Se)}finally{if(V)throw V.error}}},ye=this;try{for(var ie=I(T),ve=ie.next();!ve.done;ve=ie.next()){var we=ve.value;de(we)}}catch(P){i={error:P}}finally{try{ve&&!ve.done&&(o=ie.return)&&o.call(ie)}finally{if(i)throw i.error}}A(e.length-z);var Ce=$e(H,new ae(e),new ae(t)),Ie=[];return r.computeMoves&&(Ie=this.computeMoves(Ce,e,t,b,E,d,c,r)),y(function(){var P,V,xe,Te;function Re(j,q){if(j.lineNumber<1||j.lineNumber>q.length)return!1;var Je=q[j.lineNumber-1];return!(j.column<1||j.column>Je.length+1)}function Se(j,q){return!(j.startLineNumber<1||j.startLineNumber>q.length+1||j.endLineNumberExclusive<1||j.endLineNumberExclusive>q.length+1)}try{for(var oe=I(Ce),se=oe.next();!se.done;se=oe.next()){var ce=se.value;if(!ce.innerChanges)return!1;try{for(var We=(xe=void 0,I(ce.innerChanges)),Oe=We.next();!Oe.done;Oe=We.next()){var Ge=Oe.value,ot=Re(Ge.modifiedRange.getStartPosition(),t)&&Re(Ge.modifiedRange.getEndPosition(),t)&&Re(Ge.originalRange.getStartPosition(),e)&&Re(Ge.originalRange.getEndPosition(),e);if(!ot)return!1}}catch(j){xe={error:j}}finally{try{Oe&&!Oe.done&&(Te=We.return)&&Te.call(We)}finally{if(xe)throw xe.error}}if(!Se(ce.modified,t)||!Se(ce.original,e))return!1}}catch(j){P={error:j}}finally{try{se&&!se.done&&(V=oe.return)&&V.call(oe)}finally{if(P)throw P.error}}return!0}),new he(Ce,Ie,M)},n.prototype.computeMoves=function(e,t,r,i,o,s,d,c){var h=this,m=Bt(e,t,r,i,o,s),b=m.map(function(E){var x=h.refineDiff(t,r,new ue(E.original.toOffsetRange(),E.modified.toOffsetRange()),s,d,c),C=$e(x.mappings,new ae(t),new ae(r),!0);return new pe(E,C)});return b},n.prototype.refineDiff=function(e,t,r,i,o,s){var d=jt(r),c=d.toRangeMapping2(e,t),h=new nt(e,c.originalRange,o),m=new nt(t,c.modifiedRange,o),b=h.length+m.length<500?this.dynamicProgrammingDiffing.compute(h,m,i):this.myersDiffingAlgorithm.compute(h,m,i),E=b.diffs;E=dt(h,m,E),E=mt(h,m,E,function(C,R){return C.findWordContaining(R)}),s.extendToSubwords&&(E=mt(h,m,E,function(C,R){return C.findSubWordContaining(R)},!0)),E=It(h,m,E),E=Wt(h,m,E);var x=E.map(function(C){return new Y(h.translateRange(C.seq1Range),m.translateRange(C.seq2Range))});return{mappings:x,hitTimeout:b.hitTimeout}},n}();function jt(n){return new Le(new $(n.seq1Range.start+1,n.seq1Range.endExclusive+1),new $(n.seq2Range.start+1,n.seq2Range.endExclusive+1))}function wt(n,e,t){var r=new Ft,i=r.computeDiff(n,e,t);return i==null?void 0:i.changes.map(function(o){var s,d,c,h,m=o.innerChanges;return s=o.original.startLineNumber-1,d=o.original.endLineNumberExclusive-1,c=o.modified.startLineNumber-1,h=o.modified.endLineNumberExclusive-1,{origStart:s,origEnd:d,editStart:c,editEnd:h,charChanges:m==null?void 0:m.map(function(b){return{originalStartLineNumber:b.originalRange.startLineNumber-1,originalStartColumn:b.originalRange.startColumn-1,originalEndLineNumber:b.originalRange.endLineNumber-1,originalEndColumn:b.originalRange.endColumn-1,modifiedStartLineNumber:b.modifiedRange.startLineNumber-1,modifiedStartColumn:b.modifiedRange.startColumn-1,modifiedEndLineNumber:b.modifiedRange.endLineNumber-1,modifiedEndColumn:b.modifiedRange.endColumn-1}})}})}X.computeDiff=wt;var Et=k("../../../range").Range,qt=k("../base_diff_view").DiffChunk,Ht=function(){function n(){}return n.prototype.compute=function(e,t,r){r||(r={}),r.maxComputationTimeMs||(r.maxComputationTimeMs=500);var i=wt(e,t,r)||[];return i.map(function(o){return new qt(new Et(o.origStart,0,o.origEnd,0),new Et(o.editStart,0,o.editEnd,0),o.charChanges)})},n}();X.DiffProvider=Ht}),ace.define("ace/ext/diff",["require","exports","module","ace/ext/diff/inline_diff_view","ace/ext/diff/split_diff_view","ace/ext/diff/providers/default"],function(k,X,Ee){var Z=k("./diff/inline_diff_view").InlineDiffView,G=k("./diff/split_diff_view").SplitDiffView,I=k("./diff/providers/default").DiffProvider;function U(_,L){_=_||{},_.diffProvider=_.diffProvider||new I;var u;return _.inline?u=new Z(_):u=new G(_),L&&u.setOptions(L),u}X.InlineDiffView=Z,X.SplitDiffView=G,X.DiffProvider=I,X.createDiffView=U}),function(){ace.require(["ace/ext/diff"],function(k){Ue&&(Ue.exports=k)})}()})(Lt);var xt=Lt.exports;const Xt=Gt(xt),Kt=zt({__proto__:null,default:Xt},[xt]);export{Kt as e};
